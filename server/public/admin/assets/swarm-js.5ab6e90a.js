import{x as Pr}from"./xhr-request.d61cb99f.js";import{c as Dr}from"./es6-promise.237949db.js";var lr=function(r,n){return parseInt(r.slice(n*2+2,n*2+4),16)},Cr=function(r){var n=void 0;if(typeof window!="undefined"&&window.crypto&&window.crypto.getRandomValues)n=window.crypto.getRandomValues(new Uint8Array(r));else if(typeof Dr!="undefined")n=Dr("crypto").randomBytes(r);else throw"Safe random numbers not available.";for(var e="0x",c=0;c<r;++c)e+=("00"+n[c].toString(16)).slice(-2);return e},xr=function(r){return(r.length-2)/2},Er=function(r){return"0x"+r.reduce(function(n,e){return n+e.slice(2)},"")},Nr=function(r,n,e){return"0x"+e.slice(r*2+2,n*2+2)},Ir=function(r){for(var n="0x",e=0,c=xr(r);e<c;++e)n+=r.slice((c-e)*2,(c-e+1)*2);return n},Rr=function l(r,n){return n.length===r*2+2?n:l(r,"0x0"+n.slice(2))},Or=function l(r,n){return n.length===r*2+2?n:l(r,n+"0")},Ar=function(r){for(var n=[],e=2,c=r.length;e<c;e+=2)n.push(parseInt(r.slice(e,e+2),16));return n},Fr=function(r){for(var n="0x",e=0,c=r.length;e<c;++e){var i=r[e];n+=(i<16?"0":"")+i.toString(16)}return n},Br=function(r){return new Uint8Array(Ar(r))},zr=function(r){return Fr([].slice.call(r,0))},Hr=function(r){var n=r.toString(16);return n.length%2===0?"0x"+n:"0x0"+n},Lr=function(r){return parseInt(r.slice(2),16)},jr=function(r,n){return r.concat(n.slice(2))},sr=function(r){return r==="0x0"?"0x":r.length%2===0?r:"0x0"+r.slice(2)},Mr=function(r){return r[2]==="0"?"0x"+r.slice(3):r},Kr=function(r){for(var n="0x",e=0;e<r.length;++e)n+=("00"+r.charCodeAt(e).toString(16)).slice(-2);return n},Gr=function(r){for(var n="",e=2;e<r.length;e+=2)n+=String.fromCharCode(parseInt(r.slice(e,e+2),16));return n},qr=function(r){for(var n=function(D){var b=D.toString(16);return b.length<2?"0"+b:b},e="0x",c=0;c!=r.length;c++){var i=r.charCodeAt(c);if(i<128){e+=n(i);continue}if(i<2048)e+=n(i>>6|192);else{if(i>55295&&i<56320){if(++c==r.length)return null;var y=r.charCodeAt(c);if(y<56320||y>57343)return null;i=65536+((i&1023)<<10)+(y&1023),e+=n(i>>18|240),e+=n(i>>12&63|128)}else e+=n(i>>12|224);e+=n(i>>6&63|128)}e+=n(i&63|128)}return e},$r=function(r){for(var n="",e=0,c=xr(r);e<c;){var i=lr(r,e++);if(i>127){if(i>191&&i<224){if(e>=c)return null;i=(i&31)<<6|lr(r,e)&63}else if(i>223&&i<240){if(e+1>=c)return null;i=(i&15)<<12|(lr(r,e)&63)<<6|lr(r,++e)&63}else if(i>239&&i<248){if(e+2>=c)return null;i=(i&7)<<18|(lr(r,e)&63)<<12|(lr(r,++e)&63)<<6|lr(r,++e)&63}else return null;++e}if(i<=65535)n+=String.fromCharCode(i);else if(i<=1114111)i-=65536,n+=String.fromCharCode(i>>10|55296),n+=String.fromCharCode(i&1023|56320);else return null}return n},Sr={random:Cr,length:xr,concat:jr,flatten:Er,slice:Nr,reverse:Ir,pad:Rr,padRight:Or,fromAscii:Kr,toAscii:Gr,fromString:qr,toString:$r,fromNumber:Hr,toNumber:Lr,fromNat:sr,toNat:Mr,fromArray:Fr,toArray:Ar,fromUint8Array:zr,toUint8Array:Br},nr="0123456789abcdef".split(""),Wr=[1,256,65536,16777216],R=[0,8,16,24],wr=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],_r=function(r){return{blocks:[],reset:!0,block:0,start:0,blockCount:1600-(r<<1)>>5,outputBlocks:r>>5,s:function(n){return[].concat(n,n,n,n,n)}([0,0,0,0,0,0,0,0,0,0])}},Jr=function(r,n){for(var e=n.length,c=r.blocks,i=r.blockCount<<2,y=r.blockCount,E=r.outputBlocks,D=r.s,b=0,a,m;b<e;){if(r.reset)for(r.reset=!1,c[0]=r.block,a=1;a<y+1;++a)c[a]=0;if(typeof n!="string")for(a=r.start;b<e&&a<i;++b)c[a>>2]|=n[b]<<R[a++&3];else for(a=r.start;b<e&&a<i;++b)m=n.charCodeAt(b),m<128?c[a>>2]|=m<<R[a++&3]:m<2048?(c[a>>2]|=(192|m>>6)<<R[a++&3],c[a>>2]|=(128|m&63)<<R[a++&3]):m<55296||m>=57344?(c[a>>2]|=(224|m>>12)<<R[a++&3],c[a>>2]|=(128|m>>6&63)<<R[a++&3],c[a>>2]|=(128|m&63)<<R[a++&3]):(m=65536+((m&1023)<<10|n.charCodeAt(++b)&1023),c[a>>2]|=(240|m>>18)<<R[a++&3],c[a>>2]|=(128|m>>12&63)<<R[a++&3],c[a>>2]|=(128|m>>6&63)<<R[a++&3],c[a>>2]|=(128|m&63)<<R[a++&3]);if(r.lastByteIndex=a,a>=i){for(r.start=a-i,r.block=c[y],a=0;a<y;++a)D[a]^=c[a];br(D),r.reset=!0}else r.start=a}if(a=r.lastByteIndex,c[a>>2]|=Wr[a&3],r.lastByteIndex===i)for(c[0]=c[y],a=1;a<y+1;++a)c[a]=0;for(c[y-1]|=2147483648,a=0;a<y;++a)D[a]^=c[a];br(D);for(var P="",a=0,S=0,w;S<E;){for(a=0;a<y&&S<E;++a,++S)w=D[a],P+=nr[w>>4&15]+nr[w&15]+nr[w>>12&15]+nr[w>>8&15]+nr[w>>20&15]+nr[w>>16&15]+nr[w>>28&15]+nr[w>>24&15];S%y===0&&(br(D),a=0)}return"0x"+P},br=function(r){var n,e,c,i,y,E,D,b,m,P,a,S,w,O,B,T,j,W,_,s,J,C,V,z,tr,N,X,Q,er,or,ar,ir,ur,dr,Y,vr,A,M,Z,U,p,t,o,u,f,v,h,d,k,g,F,x,I,K,H,pr,rr,G,cr,hr,mr,fr,q;for(c=0;c<48;c+=2)i=r[0]^r[10]^r[20]^r[30]^r[40],y=r[1]^r[11]^r[21]^r[31]^r[41],E=r[2]^r[12]^r[22]^r[32]^r[42],D=r[3]^r[13]^r[23]^r[33]^r[43],b=r[4]^r[14]^r[24]^r[34]^r[44],m=r[5]^r[15]^r[25]^r[35]^r[45],P=r[6]^r[16]^r[26]^r[36]^r[46],a=r[7]^r[17]^r[27]^r[37]^r[47],S=r[8]^r[18]^r[28]^r[38]^r[48],w=r[9]^r[19]^r[29]^r[39]^r[49],n=S^(E<<1|D>>>31),e=w^(D<<1|E>>>31),r[0]^=n,r[1]^=e,r[10]^=n,r[11]^=e,r[20]^=n,r[21]^=e,r[30]^=n,r[31]^=e,r[40]^=n,r[41]^=e,n=i^(b<<1|m>>>31),e=y^(m<<1|b>>>31),r[2]^=n,r[3]^=e,r[12]^=n,r[13]^=e,r[22]^=n,r[23]^=e,r[32]^=n,r[33]^=e,r[42]^=n,r[43]^=e,n=E^(P<<1|a>>>31),e=D^(a<<1|P>>>31),r[4]^=n,r[5]^=e,r[14]^=n,r[15]^=e,r[24]^=n,r[25]^=e,r[34]^=n,r[35]^=e,r[44]^=n,r[45]^=e,n=b^(S<<1|w>>>31),e=m^(w<<1|S>>>31),r[6]^=n,r[7]^=e,r[16]^=n,r[17]^=e,r[26]^=n,r[27]^=e,r[36]^=n,r[37]^=e,r[46]^=n,r[47]^=e,n=P^(i<<1|y>>>31),e=a^(y<<1|i>>>31),r[8]^=n,r[9]^=e,r[18]^=n,r[19]^=e,r[28]^=n,r[29]^=e,r[38]^=n,r[39]^=e,r[48]^=n,r[49]^=e,O=r[0],B=r[1],v=r[11]<<4|r[10]>>>28,h=r[10]<<4|r[11]>>>28,Q=r[20]<<3|r[21]>>>29,er=r[21]<<3|r[20]>>>29,hr=r[31]<<9|r[30]>>>23,mr=r[30]<<9|r[31]>>>23,t=r[40]<<18|r[41]>>>14,o=r[41]<<18|r[40]>>>14,dr=r[2]<<1|r[3]>>>31,Y=r[3]<<1|r[2]>>>31,T=r[13]<<12|r[12]>>>20,j=r[12]<<12|r[13]>>>20,d=r[22]<<10|r[23]>>>22,k=r[23]<<10|r[22]>>>22,or=r[33]<<13|r[32]>>>19,ar=r[32]<<13|r[33]>>>19,fr=r[42]<<2|r[43]>>>30,q=r[43]<<2|r[42]>>>30,K=r[5]<<30|r[4]>>>2,H=r[4]<<30|r[5]>>>2,vr=r[14]<<6|r[15]>>>26,A=r[15]<<6|r[14]>>>26,W=r[25]<<11|r[24]>>>21,_=r[24]<<11|r[25]>>>21,g=r[34]<<15|r[35]>>>17,F=r[35]<<15|r[34]>>>17,ir=r[45]<<29|r[44]>>>3,ur=r[44]<<29|r[45]>>>3,z=r[6]<<28|r[7]>>>4,tr=r[7]<<28|r[6]>>>4,pr=r[17]<<23|r[16]>>>9,rr=r[16]<<23|r[17]>>>9,M=r[26]<<25|r[27]>>>7,Z=r[27]<<25|r[26]>>>7,s=r[36]<<21|r[37]>>>11,J=r[37]<<21|r[36]>>>11,x=r[47]<<24|r[46]>>>8,I=r[46]<<24|r[47]>>>8,u=r[8]<<27|r[9]>>>5,f=r[9]<<27|r[8]>>>5,N=r[18]<<20|r[19]>>>12,X=r[19]<<20|r[18]>>>12,G=r[29]<<7|r[28]>>>25,cr=r[28]<<7|r[29]>>>25,U=r[38]<<8|r[39]>>>24,p=r[39]<<8|r[38]>>>24,C=r[48]<<14|r[49]>>>18,V=r[49]<<14|r[48]>>>18,r[0]=O^~T&W,r[1]=B^~j&_,r[10]=z^~N&Q,r[11]=tr^~X&er,r[20]=dr^~vr&M,r[21]=Y^~A&Z,r[30]=u^~v&d,r[31]=f^~h&k,r[40]=K^~pr&G,r[41]=H^~rr&cr,r[2]=T^~W&s,r[3]=j^~_&J,r[12]=N^~Q&or,r[13]=X^~er&ar,r[22]=vr^~M&U,r[23]=A^~Z&p,r[32]=v^~d&g,r[33]=h^~k&F,r[42]=pr^~G&hr,r[43]=rr^~cr&mr,r[4]=W^~s&C,r[5]=_^~J&V,r[14]=Q^~or&ir,r[15]=er^~ar&ur,r[24]=M^~U&t,r[25]=Z^~p&o,r[34]=d^~g&x,r[35]=k^~F&I,r[44]=G^~hr&fr,r[45]=cr^~mr&q,r[6]=s^~C&O,r[7]=J^~V&B,r[16]=or^~ir&z,r[17]=ar^~ur&tr,r[26]=U^~t&dr,r[27]=p^~o&Y,r[36]=g^~x&u,r[37]=F^~I&f,r[46]=hr^~fr&K,r[47]=mr^~q&H,r[8]=C^~O&T,r[9]=V^~B&j,r[18]=ir^~z&N,r[19]=ur^~tr&X,r[28]=t^~dr&vr,r[29]=o^~Y&A,r[38]=x^~u&v,r[39]=I^~f&h,r[48]=fr^~K&pr,r[49]=q^~H&rr,r[0]^=wr[c],r[1]^=wr[c+1]},yr=function(r){return function(n){var e;if(n.slice(0,2)==="0x"){e=[];for(var c=2,i=n.length;c<i;c+=2)e.push(parseInt(n.slice(c,c+2),16))}else e=n;return Jr(_r(r),e)}},Vr={keccak256:yr(256),keccak512:yr(512),keccak256s:yr(256),keccak512s:yr(512)},Xr=Vr.keccak256,$=Sr,gr=function(r,n){var e=$.reverse($.pad(6,$.fromNumber(r))),c=$.flatten([e,"0x0000",n]);return Xr(c).slice(2)},Qr=function l(r){typeof r=="string"&&r.slice(0,2)!=="0x"?r=$.fromString(r):typeof r!="string"&&r.length!==void 0&&(r=$.fromUint8Array(r));var n=$.length(r);if(n<=4096)return gr(n,r);for(var e=4096;e*(4096/32)<n;)e*=4096/32;for(var c=[],i=0;i<n;i+=e){var y=e<n-i?e:n-i;c.push(l($.slice(r,i,i+y)))}return gr(n,$.flatten(c))},Yr=Qr,kr=function(r){return function(){return new Promise(function(n,e){var c=function(D){var b={},m=D.target.files.length,P=0;[].map.call(D.target.files,function(a){var S=new FileReader;S.onload=function(w){var O=new Uint8Array(w.target.result);if(r==="directory"){var B=a.webkitRelativePath;b[B.slice(B.indexOf("/")+1)]={type:"text/plain",data:O},++P===m&&n(b)}else if(r==="file"){var T=a.webkitRelativePath;n({type:mimetype.lookup(T),data:O})}else n(O)},S.readAsArrayBuffer(a)})},i;r==="directory"?(i=document.createElement("input"),i.addEventListener("change",c),i.type="file",i.webkitdirectory=!0,i.mozdirectory=!0,i.msdirectory=!0,i.odirectory=!0,i.directory=!0):(i=document.createElement("input"),i.addEventListener("change",c),i.type="file");var y=document.createEvent("MouseEvents");y.initEvent("click",!0,!1),i.dispatchEvent(y)})}},Zr={data:kr("data"),file:kr("file"),directory:kr("directory")},Ur=function(l){var r=l.fs,n=l.files,e=l.os,c=l.path,i=l.child_process,y=l.mimetype,E=l.defaultArchives,D=l.request,b=l.downloadUrl,m=l.bytes,P=l.hash,a=l.pick,S=function(t){return function(o){return function(u){return u[t]=o,u}}},w=function(t){return function(o){for(var u={},f=0,v=t.length;f<v;++f)u[t[f]]=o[f];return u}},O=function(t){return function(o){var u={};for(var f in t)u[f]=t[f];for(var v in o)u[v]=o[v];return u}},B=function(t){return function(o){return"".concat(t,"/bzz-raw:/").concat(o)}},T=function(t){return function(o){return new Promise(function(u,f){D(B(t)(o),{responseType:"arraybuffer"},function(v,h,d){return v?f(v):d.statusCode>=400?f(new Error("Error ".concat(d.statusCode,"."))):u(new Uint8Array(h))})})}},j=function(t){return function(o){var u=function f(v){return function(h){return function(d){var k=function(x){return{type:x.contentType,hash:x.hash}},g=function(x){return x.path===void 0?Promise.resolve():x.contentType==="application/bzz-manifest+json"?f(x.hash)(h+x.path)(d):Promise.resolve(S(h+x.path)(k(x))(d))};return T(t)(v).then(function(F){return JSON.parse(M(F)).entries}).then(function(F){return Promise.all(F.map(g))}).then(function(){return d})}}};return u(o)("")({})}},W=function(t){return function(o){return j(t)(o).then(function(u){return w(Object.keys(u))(Object.keys(u).map(function(f){return u[f].hash}))})}},_=function(t){return function(o){return j(t)(o).then(function(u){var f=Object.keys(u),v=f.map(function(g){return u[g].hash}),h=f.map(function(g){return u[g].type}),d=v.map(T(t)),k=function(F){return F.map(function(x,I){return{type:h[I],data:x}})};return Promise.all(d).then(function(g){return w(f)(k(g))})})}},s=function(t){return function(o){return function(u){return n.download(B(t)(o))(u)}}},J=function(t){return function(o){return function(u){return W(t)(o).then(function(f){var v=[];for(var h in f)if(h.length>0){var d=c.join(u,h);v.push(s(t)(f[h])(d))}return Promise.all(v).then(function(){return u})})}}},C=function(t){return function(o){return new Promise(function(u,f){var v={body:typeof o=="string"?Z(o):o,method:"POST"};D("".concat(t,"/bzz-raw:/"),v,function(h,d){return h?f(h):u(d)})})}},V=function(t){return function(o){return function(u){return function(f){var v=function h(d){var k=u[0]==="/"?u:"/"+u,g="".concat(t,"/bzz:/").concat(o).concat(k),F={method:"PUT",headers:{"Content-Type":f.type},body:f.data};return new Promise(function(x,I){D(g,F,function(K,H){return K?I(K):H.indexOf("error")!==-1?I(H):x(H)})}).catch(function(x){return d>0&&h(d-1)})};return v(3)}}}},z=function(t){return function(o){return N(t)({"":o})}},tr=function(t){return function(o){return r.readFile(o).then(function(u){return z(t)({type:y.lookup(o),data:u})})}},N=function(t){return function(o){return C(t)("{}").then(function(u){var f=function(d){return function(k){return V(t)(k)(d)(o[d])}},v=function(d,k){return d.then(f(k))};return Object.keys(o).reduce(v,Promise.resolve(u))})}},X=function(t){return function(o){return r.readFile(o).then(C(t))}},Q=function(t){return function(o){return function(u){return n.directoryTree(u).then(function(f){return Promise.all(f.map(function(v){return r.readFile(v)})).then(function(v){var h=f.map(function(k){return k.slice(u.length)}),d=f.map(function(k){return y.lookup(k)||"text/plain"});return w(h)(v.map(function(k,g){return{type:d[g],data:k}}))})}).then(function(f){return O(o?{"":f[o]}:{})(f)}).then(N(t))}}},er=function(t){return function(o){if(o.pick==="data")return a.data().then(C(t));if(o.pick==="file")return a.file().then(z(t));if(o.pick==="directory")return a.directory().then(N(t));if(o.path)switch(o.kind){case"data":return X(t)(o.path);case"file":return tr(t)(o.path);case"directory":return Q(t)(o.defaultFile)(o.path)}else{if(o.length||typeof o=="string")return C(t)(o);if(o instanceof Object)return N(t)(o)}return Promise.reject(new Error("Bad arguments"))}},or=function(t){return function(o){return function(u){return vr(t)(o).then(function(f){return f?u?J(t)(o)(u):_(t)(o):u?s(t)(o)(u):T(t)(o)})}}},ar=function(t,o){var u=e.platform().replace("win32","windows")+"-"+(e.arch()==="x64"?"amd64":"386"),f=(o||E)[u],v=b+f.archive+".tar.gz",h=f.archiveMD5,d=f.binaryMD5;return n.safeDownloadArchived(v)(h)(d)(t)},ir=function(t){return new Promise(function(o,u){var f=i.spawn,v=function(q){return function(Tr){return(""+Tr).indexOf(q)!==-1}},h=t.account,d=t.password,k=t.dataDir,g=t.ensApi,F=t.privateKey,x=0,I=1,K=2,H="Passphrase",pr="Swarm http proxy started",rr=x,G=f(t.binPath,["--bzzaccount",h||F,"--datadir",k,"--ens-api",g]),cr=function(q){rr===x&&v(H)(q)?setTimeout(function(){rr=I,G.stdin.write(d+`
`)},500):v(pr)(q)&&(rr=K,clearTimeout(mr),o(G))};G.stdout.on("data",cr),G.stderr.on("data",cr);var hr=function(){return u(new Error("Couldn't start swarm process."))},mr=setTimeout(hr,2e4)})},ur=function(t){return new Promise(function(o,u){t.stderr.removeAllListeners("data"),t.stdout.removeAllListeners("data"),t.stdin.removeAllListeners("error"),t.removeAllListeners("error"),t.removeAllListeners("exit"),t.kill("SIGINT");var f=setTimeout(function(){return t.kill("SIGKILL")},8e3);t.once("close",function(){clearTimeout(f),o()})})},dr=function(t){return function(o){return Y("http://localhost:8500").then(function(u){return u?o(U("http://localhost:8500")).then(function(){}):ar(t.binPath,t.archives).onData(function(f){return(t.onProgress||function(){})(f.length)}).then(function(){return ir(t)}).then(function(f){return o(U("http://localhost:8500")).then(function(){return f})}).then(ur)})}},Y=function(t){var o="test",u="c9a99c7d326dcc6316f32fe2625b311f6dc49a175e6877681ded93137d3569e7";return C(t)(o).then(function(f){return f===u}).catch(function(){return!1})},vr=function(t){return function(o){return T(t)(o).then(function(u){try{return!!JSON.parse(M(u)).entries}catch(f){return!1}})}},A=function(t){return function(o,u,f,v,h){var d;return typeof o!="undefined"&&(d=t(o)),typeof u!="undefined"&&(d=t(u)),typeof f!="undefined"&&(d=t(f)),typeof v!="undefined"&&(d=t(v)),typeof h!="undefined"&&(d=t(h)),d}},M=function(t){return m.toString(m.fromUint8Array(t))},Z=function(t){return m.toUint8Array(m.fromString(t))},U=function(t){return{download:function(u,f){return or(t)(u)(f)},downloadData:A(T(t)),downloadDataToDisk:A(s(t)),downloadDirectory:A(_(t)),downloadDirectoryToDisk:A(J(t)),downloadEntries:A(j(t)),downloadRoutes:A(W(t)),isAvailable:function(){return Y(t)},upload:function(u){return er(t)(u)},uploadData:A(C(t)),uploadFile:A(z(t)),uploadFileFromDisk:A(z(t)),uploadDataFromDisk:A(X(t)),uploadDirectory:A(N(t)),uploadDirectoryFromDisk:A(Q(t)),uploadToManifest:A(V(t)),pick:a,hash:P,fromString:Z,toString:M}};return{at:U,local:dr,download:or,downloadBinary:ar,downloadData:T,downloadDataToDisk:s,downloadDirectory:_,downloadDirectoryToDisk:J,downloadEntries:j,downloadRoutes:W,isAvailable:Y,startProcess:ir,stopProcess:ur,upload:er,uploadData:C,uploadDataFromDisk:X,uploadFile:z,uploadFileFromDisk:tr,uploadDirectory:N,uploadDirectoryFromDisk:Q,uploadToManifest:V,pick:a,hash:P,fromString:Z,toString:M}},L=function(){throw"This swarm.js function isn't available on the browser."},rn={readFile:L},nn={download:L,safeDownloadArchived:L,directoryTree:L},tn={platform:L,arch:L},en={join:L,slice:L},on={spawn:L},an={lookup:L},un={},cn=null,fn=Pr,ln=Sr,dn=Yr,vn=Zr,pn=Ur,yn=pn({fs:rn,files:nn,os:tn,path:en,child_process:on,defaultArchives:un,mimetype:an,request:fn,downloadUrl:cn,bytes:ln,hash:dn,pick:vn});export{yn as a};
