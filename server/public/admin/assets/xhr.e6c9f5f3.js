import{w as M}from"./global.ad4fdb11.js";import{i as L}from"./is-function.26fae136.js";import{p as C}from"./parse-headers.d0dc7d6e.js";import{i as D}from"./xtend.45b7f156.js";var b={exports:{}},H=M,j=L,k=C,A=D;b.exports=u;b.exports.default=u;u.XMLHttpRequest=H.XMLHttpRequest||F;u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:H.XDomainRequest;O(["get","put","post","patch","head","delete"],function(e){u[e==="delete"?"del":e]=function(n,a,o){return a=T(n,a,o),a.method=e.toUpperCase(),q(a)}});function O(e,n){for(var a=0;a<e.length;a++)n(e[a])}function S(e){for(var n in e)if(e.hasOwnProperty(n))return!1;return!0}function T(e,n,a){var o=e;return j(n)?(a=n,typeof e=="string"&&(o={uri:e})):o=A(n,{uri:e}),o.callback=a,o}function u(e,n,a){return n=T(e,n,a),q(n)}function q(e){if(typeof e.callback=="undefined")throw new Error("callback argument missing");var n=!1,a=function(f,l,g){n||(n=!0,e.callback(f,l,g))};function o(){r.readyState===4&&setTimeout(v,0)}function E(){var t=void 0;if(r.response?t=r.response:t=r.responseText||x(r),R)try{t=JSON.parse(t)}catch(f){}return t}function m(t){return clearTimeout(w),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,a(t,X)}function v(){if(!c){var t;clearTimeout(w),e.useXDR&&r.status===void 0?t=200:t=r.status===1223?204:r.status;var f=X,l=null;return t!==0?(f={body:E(),statusCode:t,method:i,headers:{},url:p,rawRequest:r},r.getAllResponseHeaders&&(f.headers=k(r.getAllResponseHeaders()))):l=new Error("Internal XMLHttpRequest Error"),a(l,f,f.body)}}var r=e.xhr||null;r||(e.cors||e.useXDR?r=new u.XDomainRequest:r=new u.XMLHttpRequest);var d,c,p=r.url=e.uri||e.url,i=r.method=e.method||"GET",y=e.body||e.data,s=r.headers=e.headers||{},h=!!e.sync,R=!1,w,X={body:void 0,headers:{},statusCode:0,method:i,url:p,rawRequest:r};if("json"in e&&e.json!==!1&&(R=!0,s.accept||s.Accept||(s.Accept="application/json"),i!=="GET"&&i!=="HEAD"&&(s["content-type"]||s["Content-Type"]||(s["Content-Type"]="application/json"),y=JSON.stringify(e.json===!0?y:e.json))),r.onreadystatechange=o,r.onload=v,r.onerror=m,r.onprogress=function(){},r.onabort=function(){c=!0},r.ontimeout=m,r.open(i,p,!h,e.username,e.password),h||(r.withCredentials=!!e.withCredentials),!h&&e.timeout>0&&(w=setTimeout(function(){if(!c){c=!0,r.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",m(t)}},e.timeout)),r.setRequestHeader)for(d in s)s.hasOwnProperty(d)&&r.setRequestHeader(d,s[d]);else if(e.headers&&!S(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(r.responseType=e.responseType),"beforeSend"in e&&typeof e.beforeSend=="function"&&e.beforeSend(r),r.send(y||null),r}function x(e){try{if(e.responseType==="document")return e.responseXML;var n=e.responseXML&&e.responseXML.documentElement.nodeName==="parsererror";if(e.responseType===""&&!n)return e.responseXML}catch(a){}return null}function F(){}export{b as x};
