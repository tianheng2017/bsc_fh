var U=(D,b,F)=>new Promise((y,_)=>{var t=f=>{try{u(F.next(f))}catch(V){_(V)}},g=f=>{try{u(F.throw(f))}catch(V){_(V)}},u=f=>f.done?y(f.value):Promise.resolve(f.value).then(t,g);u((F=F.apply(D,b)).next())});import{t as Y,E as I,Y as Z,x as q,J as H,K as Q,y as X,L as ee,W as ue,A as le}from"./element-plus.2d443847.js";import{b as oe,g as te,h as se,M as v}from"./index.a71cd9d1.js";import{d as W,r as $,s as M,$ as P,e as G,w as ae,j as ne,o as p,c as k,U as l,L as o,u as c,a as s,K as B,V as N,a8 as L,Z as R,S as h,n as O,P as de,T as ie,R as A}from"./@vue.230e89ba.js";import{c as re}from"./@vueuse.88988742.js";import{m as pe,a as me,b as ce}from"./menu.7a14fc02.js";import{P as Fe}from"./index.89655f46.js";const _e={class:"icon-select"},fe={class:"flex justify-between"},Ee=s("div",{class:"mb-3"},"\u8BF7\u9009\u62E9\u56FE\u6807",-1),ve=["onClick"],Ce={class:"h-[280px]"},be={class:"flex flex-wrap"},Ve={class:"flex w-4"},Be=h("\u65E0"),he=W({__name:"picker",props:{modelValue:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(D,{emit:b}){const F=$(0),y=[{name:"element\u56FE\u6807",icons:te()},{name:"\u672C\u5730\u56FE\u6807",icons:se()}],_=M(),t=P({inputValue:"",popoverVisible:!1,popoverWidth:0,mouseoverSelect:!1,inputFocus:!1}),g=()=>{t.inputFocus=t.popoverVisible=!0},u=()=>{t.inputFocus=!1,t.popoverVisible=t.mouseoverSelect},f=m=>{t.mouseoverSelect=t.popoverVisible=!1,b("update:modelValue",m),b("change",m)},V=()=>{b("update:modelValue",""),b("change","")},w=G(()=>{var E,d;const m=(d=(E=y[F.value])==null?void 0:E.icons)!=null?d:[];if(!t.inputValue)return m;const n=t.inputValue.toLowerCase();return m.filter(e=>{if(e.toLowerCase().indexOf(n)!==-1)return e})}),T=()=>{O(()=>{var n;const m=(n=_.value)==null?void 0:n.$el.offsetWidth;t.popoverWidth=m<300?300:m})};return re(document.body,"click",()=>{t.popoverVisible=!!(t.inputFocus||t.mouseoverSelect)}),ae(()=>t.popoverVisible,m=>U(this,null,function*(){var n,E;yield O(),m?(n=_.value)==null||n.focus():(E=_.value)==null||E.blur()})),ne(()=>{T()}),(m,n)=>{const E=oe,d=Y,e=I,C=Z;return p(),k("div",_e,[l(C,{visible:t.popoverVisible,"onUpdate:visible":n[3]||(n[3]=r=>t.popoverVisible=r),width:t.popoverWidth},{reference:o(()=>[l(c(q),{ref_key:"inputRef",ref:_,modelValue:t.inputValue,"onUpdate:modelValue":n[2]||(n[2]=r=>t.inputValue=r),modelModifiers:{trim:!0},placeholder:"\u641C\u7D22\u56FE\u6807",disabled:D.disabled,onFocus:g,onBlur:u},{prepend:o(()=>[s("div",Ve,[D.modelValue?(p(),B(E,{key:D.modelValue,name:D.modelValue},null,8,["name"])):(p(),k(N,{key:1},[Be],64))])]),append:o(()=>[l(d,null,{default:o(()=>[l(E,{name:"el-icon-Close",size:18,onClick:V})]),_:1})]),_:1},8,["modelValue","disabled"])]),default:o(()=>[s("div",{onMouseover:n[0]||(n[0]=R(r=>t.mouseoverSelect=!0,["stop"])),onMouseout:n[1]||(n[1]=R(r=>t.mouseoverSelect=!1,["stop"]))},[s("div",null,[s("div",fe,[Ee,s("div",null,[(p(),k(N,null,L(y,(r,i)=>s("span",{key:i,class:de(["cursor-pointer text-sm ml-2",{"text-primary":i==F.value}]),onClick:S=>F.value=i},ie(r.name),11,ve)),64))])]),s("div",Ce,[l(e,null,{default:o(()=>[s("div",be,[(p(!0),k(N,null,L(c(w),r=>(p(),k("div",{key:r,class:"m-1"},[l(d,{onClick:i=>f(r)},{default:o(()=>[l(E,{name:r,size:18},null,8,["name"])]),_:2},1032,["onClick"])]))),128))])]),_:1})])])],32)]),_:1},8,["visible","width"])])}}}),De={class:"edit-popup"},ye=h("\u76EE\u5F55"),Ae=h("\u83DC\u5355"),ke=h("\u6309\u94AE"),ge={class:"flex-1"},xe=s("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u8DEF\u7531\u5730\u5740\uFF0C\u5982\uFF1A`user`\uFF0C\u5982\u5916\u7F51\u5730\u5740\u9700\u5185\u94FE\u8BBF\u95EE\u5219\u4EE5`http(s)://`\u5F00\u5934 ",-1),Ue={class:"flex-1"},we=s("div",{class:"form-tips"}," \u8BBF\u95EE\u7684\u7EC4\u4EF6\u8DEF\u5F84\uFF0C\u5982\uFF1A`user/setting`\uFF0C\u9ED8\u8BA4\u5728`views`\u76EE\u5F55\u4E0B ",-1),Te={class:"flex-1"},Ne=s("div",{class:"form-tips"}," \u5C06\u4F5C\u4E3Aserver\u7AEFAPI\u9A8C\u6743\u4F7F\u7528\uFF0C\u5982`auth.admin/user`\uFF0C\u8BF7\u8C28\u614E\u4FEE\u6539 ",-1),$e={class:"flex-1"},Me=s("div",{class:"form-tips"},' \u8BBF\u95EE\u8DEF\u7531\u7684\u9ED8\u8BA4\u4F20\u9012\u53C2\u6570\uFF0C\u5982\uFF1A`{"id": 1, "name": "admin"}`\u6216`id=1&name=admin` ',-1),Se=h("\u663E\u793A"),Le=h("\u9690\u85CF"),Re=s("div",{class:"form-tips"}," \u9009\u62E9\u9690\u85CF\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4F46\u4ECD\u7136\u53EF\u4EE5\u8BBF\u95EE ",-1),Oe=h("\u6B63\u5E38"),Ie=h("\u505C\u7528"),qe=s("div",{class:"form-tips"}," \u9009\u62E9\u505C\u7528\u5219\u8DEF\u7531\u5C06\u4E0D\u4F1A\u51FA\u73B0\u5728\u4FA7\u8FB9\u680F\uFF0C\u4E5F\u4E0D\u80FD\u88AB\u8BBF\u95EE ",-1),We=s("div",{class:"form-tips"},"\u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),Ze=W({__name:"edit",emits:["success","close"],setup(D,{expose:b,emit:F}){const y=M(),_=M(),t=$("add"),g=G(()=>t.value=="edit"?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355"),u=P({id:"",pid:0,type:v.CATALOGUE,icon:"",name:"",sort:1,paths:"",perms:"",component:"",selected:"",params:"",is_cache:0,is_show:1,is_disable:0}),f={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355",trigger:["blur","change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0",trigger:"blur"}],paths:[{required:!0,message:"\u8BF7\u8F93\u5165\u8DEF\u7531\u5730\u5740",trigger:"blur"}],component:[{required:!0,message:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u5730\u5740",trigger:"blur"}]},V=$([]),w=()=>U(this,null,function*(){const d=yield pe({page_type:0}),e={id:0,name:"\u9876\u7EA7",children:[]};e.children=d.lists,V.value.push(e)}),T=()=>U(this,null,function*(){var d,e;yield(d=y.value)==null?void 0:d.validate(),t.value=="edit"?yield me(u):yield ce(u),(e=_.value)==null||e.close(),F("success")}),m=(d="add")=>{var e;t.value=d,(e=_.value)==null||e.open()},n=d=>{for(const e in u)d[e]!=null&&d[e]!=null&&(u[e]=d[e])},E=()=>{F("close")};return w(),b({open:m,setFormData:n}),(d,e)=>{const C=H,r=Q,i=X,S=ee,x=q,z=he,j=ue,K=le,J=I;return p(),k("div",De,[l(Fe,{ref_key:"popupRef",ref:_,title:c(g),async:!0,width:"550px",clickModalClose:!0,onConfirm:T,onClose:E},{default:o(()=>[l(J,{class:"h-[400px] sm:h-[500px]"},{default:o(()=>[l(K,{ref_key:"formRef",ref:y,model:u,"label-width":"80px",rules:f},{default:o(()=>[l(i,{label:"\u83DC\u5355\u7C7B\u578B",prop:"type",required:""},{default:o(()=>[l(r,{modelValue:u.type,"onUpdate:modelValue":e[0]||(e[0]=a=>u.type=a)},{default:o(()=>[l(C,{label:c(v).CATALOGUE},{default:o(()=>[ye]),_:1},8,["label"]),l(C,{label:c(v).MENU},{default:o(()=>[Ae]),_:1},8,["label"]),l(C,{label:c(v).BUTTON},{default:o(()=>[ke]),_:1},8,["label"])]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"\u7236\u7EA7\u83DC\u5355",prop:"pid"},{default:o(()=>[l(S,{class:"flex-1",modelValue:u.pid,"onUpdate:modelValue":e[1]||(e[1]=a=>u.pid=a),data:V.value,clearable:"","node-key":"id",props:{label:"name"},"default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u7236\u7EA7\u83DC\u5355","check-strictly":""},null,8,["modelValue","data"])]),_:1}),l(i,{label:"\u83DC\u5355\u540D\u79F0",prop:"name"},{default:o(()=>[l(x,{modelValue:u.name,"onUpdate:modelValue":e[2]||(e[2]=a=>u.name=a),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),u.type!=c(v).BUTTON?(p(),B(i,{key:0,label:"\u83DC\u5355\u56FE\u6807",prop:"icon"},{default:o(()=>[l(z,{class:"flex-1",modelValue:u.icon,"onUpdate:modelValue":e[3]||(e[3]=a=>u.icon=a)},null,8,["modelValue"])]),_:1})):A("",!0),u.type!=c(v).BUTTON?(p(),B(i,{key:1,label:"\u8DEF\u7531\u8DEF\u5F84",prop:"paths"},{default:o(()=>[s("div",ge,[l(x,{modelValue:u.paths,"onUpdate:modelValue":e[4]||(e[4]=a=>u.paths=a),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u8DEF\u5F84"},null,8,["modelValue"]),xe])]),_:1})):A("",!0),u.type==c(v).MENU?(p(),B(i,{key:2,label:"\u7EC4\u4EF6\u8DEF\u5F84",prop:"component"},{default:o(()=>[s("div",Ue,[l(x,{modelValue:u.component,"onUpdate:modelValue":e[5]||(e[5]=a=>u.component=a),placeholder:"\u8BF7\u8F93\u5165\u7EC4\u4EF6\u8DEF\u5F84"},null,8,["modelValue"]),we])]),_:1})):A("",!0),u.type!=c(v).CATALOGUE?(p(),B(i,{key:3,label:"\u6743\u9650\u5B57\u7B26",prop:"perms"},{default:o(()=>[s("div",Te,[l(x,{modelValue:u.perms,"onUpdate:modelValue":e[6]||(e[6]=a=>u.perms=a),placeholder:"\u8BF7\u8F93\u5165\u6743\u9650\u5B57\u7B26"},null,8,["modelValue"]),Ne])]),_:1})):A("",!0),u.type==c(v).MENU?(p(),B(i,{key:4,label:"\u8DEF\u7531\u53C2\u6570",prop:"params"},{default:o(()=>[s("div",null,[s("div",$e,[l(x,{modelValue:u.params,"onUpdate:modelValue":e[7]||(e[7]=a=>u.params=a),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531\u53C2\u6570"},null,8,["modelValue"])]),Me])]),_:1})):A("",!0),u.type!=c(v).BUTTON?(p(),B(i,{key:5,label:"\u662F\u5426\u663E\u793A",prop:"is_show",required:""},{default:o(()=>[s("div",null,[l(r,{modelValue:u.is_show,"onUpdate:modelValue":e[8]||(e[8]=a=>u.is_show=a)},{default:o(()=>[l(C,{label:1},{default:o(()=>[Se]),_:1}),l(C,{label:0},{default:o(()=>[Le]),_:1})]),_:1},8,["modelValue"]),Re])]),_:1})):A("",!0),u.type!=c(v).BUTTON?(p(),B(i,{key:6,label:"\u83DC\u5355\u72B6\u6001",prop:"is_disable",required:""},{default:o(()=>[s("div",null,[l(r,{modelValue:u.is_disable,"onUpdate:modelValue":e[9]||(e[9]=a=>u.is_disable=a)},{default:o(()=>[l(C,{label:0},{default:o(()=>[Oe]),_:1}),l(C,{label:1},{default:o(()=>[Ie]),_:1})]),_:1},8,["modelValue"]),qe])]),_:1})):A("",!0),l(i,{label:"\u83DC\u5355\u6392\u5E8F",prop:"sort"},{default:o(()=>[s("div",null,[l(j,{modelValue:u.sort,"onUpdate:modelValue":e[10]||(e[10]=a=>u.sort=a)},null,8,["modelValue"]),We])]),_:1})]),_:1},8,["model"])]),_:1})]),_:1},8,["title"])])}}});export{Ze as _};
