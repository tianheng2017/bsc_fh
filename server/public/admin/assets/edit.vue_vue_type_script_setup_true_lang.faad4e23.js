var E=(r,B,i)=>new Promise((f,p)=>{var m=t=>{try{e(i.next(t))}catch(n){p(n)}},b=t=>{try{e(i.throw(t))}catch(n){p(n)}},e=t=>t.done?f(t.value):Promise.resolve(t.value).then(m,b);e((i=i.apply(r,B)).next())});import{x as N,y as P,G as S,H as I,s as O,A as G}from"./element-plus.2d443847.js";import{M as H}from"./picker.6271ba56.js";import{P as K}from"./index.89655f46.js";import{r as T}from"./role.afc8fa1f.js";import{r as F}from"./index.a71cd9d1.js";import{d as $}from"./department.1b08223f.js";import{c as z}from"./post.d3f4b632.js";import{d as J,s as A,r as Q,e as W,$ as V,o as c,c as D,U as l,L as s,a as v,K as g,R as k,V as X,a8 as Y,u as Z}from"./@vue.230e89ba.js";function ce(r){return F.get({url:"/auth.admin/lists",params:r})}function ee(r){return F.post({url:"/auth.admin/add",params:r})}function ue(r){return F.post({url:"/auth.admin/edit",params:r})}function fe(r){return F.post({url:"/auth.admin/delete",params:r})}const oe={class:"edit-popup"},le=v("div",{class:"form-tips"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),_e=J({__name:"edit",emits:["success","close"],setup(r,{expose:B,emit:i}){const f=A(),p=A(),m=Q("add"),b=W(()=>m.value=="edit"?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458"),e=V({id:"",account:"",name:"",dept_id:"",jobs_id:"",role_id:"",avatar:"",password:"",password_confirm:"",disable:0,multipoint_login:1,root:0}),t=V({account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:["blur"]}],password_confirm:[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801",trigger:["blur"]}]}),n=V({role:[],dept:[],jobs:[]}),y=()=>{T({page_type:0}).then(a=>{n.role=a.lists}),$({page_type:0}).then(a=>{n.dept=a}),z({page_type:0}).then(a=>{n.jobs=a.lists})},h=()=>E(this,null,function*(){var a,u;yield(a=f.value)==null?void 0:a.validate(),m.value=="edit"?yield ue(e):yield ee(e),(u=p.value)==null||u.close(),i("success")}),U=(a="add")=>{var u;m.value=a,(u=p.value)==null||u.open()},x=a=>{for(const u in e)a[u]!=null&&a[u]!=null&&(e[u]=a[u]);t.password=[],t.password_confirm=[]},R=()=>{i("close")};return y(),B({open:U,setFormData:x}),(a,u)=>{const _=N,d=P,j=H,w=S,q=I,C=O,L=G;return c(),D("div",oe,[l(K,{ref_key:"popupRef",ref:p,title:Z(b),async:!0,width:"550px",clickModalClose:!0,onConfirm:h,onClose:R},{default:s(()=>[l(L,{ref_key:"formRef",ref:f,model:e,"label-width":"84px",rules:t},{default:s(()=>[l(d,{label:"\u8D26\u53F7",prop:"account"},{default:s(()=>[l(_,{modelValue:e.account,"onUpdate:modelValue":u[0]||(u[0]=o=>e.account=o),disabled:e.root==1,placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue","disabled"])]),_:1}),l(d,{label:"\u5934\u50CF"},{default:s(()=>[v("div",null,[v("div",null,[l(j,{modelValue:e.avatar,"onUpdate:modelValue":u[1]||(u[1]=o=>e.avatar=o),limit:1},null,8,["modelValue"])]),le])]),_:1}),l(d,{label:"\u540D\u79F0",prop:"name"},{default:s(()=>[l(_,{modelValue:e.name,"onUpdate:modelValue":u[2]||(u[2]=o=>e.name=o),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u89D2\u8272",prop:"role_id"},{default:s(()=>[l(q,{modelValue:e.role_id,"onUpdate:modelValue":u[3]||(u[3]=o=>e.role_id=o),disabled:e.root==1,class:"flex-1",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:s(()=>[e.root==1?(c(),g(w,{key:0,label:"\u7CFB\u7EDF\u7BA1\u7406\u5458",value:0})):k("",!0),(c(!0),D(X,null,Y(n.role,(o,M)=>(c(),g(w,{key:M,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),l(d,{label:"\u5BC6\u7801",prop:"password"},{default:s(()=>[l(_,{modelValue:e.password,"onUpdate:modelValue":u[4]||(u[4]=o=>e.password=o),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),l(d,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password_confirm"},{default:s(()=>[l(_,{modelValue:e.password_confirm,"onUpdate:modelValue":u[5]||(u[5]=o=>e.password_confirm=o),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),e.root!=1?(c(),g(d,{key:0,label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:s(()=>[l(C,{modelValue:e.disable,"onUpdate:modelValue":u[6]||(u[6]=o=>e.disable=o),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1})):k("",!0),l(d,{label:"\u591A\u5904\u767B\u5F55"},{default:s(()=>[l(C,{modelValue:e.multipoint_login,"onUpdate:modelValue":u[7]||(u[7]=o=>e.multipoint_login=o),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{_e as _,ue as a,fe as b,ce as c};
