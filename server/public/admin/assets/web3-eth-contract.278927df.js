var P=Object.defineProperty;var E=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable;var B=(r,t,e)=>t in r?P(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,A=(r,t)=>{for(var e in t||(t={}))T.call(t,e)&&B(r,e,t[e]);if(E)for(var e of E(t))I.call(t,e)&&B(r,e,t[e]);return r};import{l as M}from"./web3-core.2b55c245.js";import{l as w}from"./web3-core-method.621da27b.js";import{l as F}from"./web3-utils.4b7ab516.js";import{l as O}from"./web3-core-subscriptions.e36166d3.js";import{l as C}from"./web3-core-helpers.1fd5b4bd.js";import{l as x}from"./web3-core-promievent.cb88fa51.js";import{l as L}from"./web3-eth-abi.7549ebed.js";var k=M,b=w,d=F,j=O.subscription,f=C.formatters,h=C.errors,D=x,_=L,l=function r(t,e,o){var n=this,i=Array.prototype.slice.call(arguments);if(!(this instanceof r))throw new Error('Please use the "new" keyword to instantiate a web3.eth.Contract() object!');if(this.setProvider=function(){k.packageInit(n,arguments),n.clearSubscriptions=n._requestManager.clearSubscriptions},k.packageInit(this,[this.constructor]),this.clearSubscriptions=this._requestManager.clearSubscriptions,!t||!Array.isArray(t))throw h.ContractMissingABIError();this.options={};var s=i[i.length-1];!!s&&typeof s=="object"&&!Array.isArray(s)&&(o=s,this.options=A(A({},this.options),this._getOrSetDefaultOptions(o)),!!e&&typeof e=="object"&&(e=null)),Object.defineProperty(this.options,"address",{set:function(a){a&&(n._address=d.toChecksumAddress(f.inputAddressFormatter(a)))},get:function(){return n._address},enumerable:!0}),Object.defineProperty(this.options,"jsonInterface",{set:function(a){return n.methods={},n.events={},n._jsonInterface=a.map(function(c){var u,m;if(c.constant=c.stateMutability==="view"||c.stateMutability==="pure"||c.constant,c.payable=c.stateMutability==="payable"||c.payable,c.name&&(m=d._jsonInterfaceMethodToString(c)),c.type==="function"){if(c.signature=_.encodeFunctionSignature(m),u=n._createTxObject.bind({method:c,parent:n}),!n.methods[c.name])n.methods[c.name]=u;else{var y=n._createTxObject.bind({method:c,parent:n,nextMethod:n.methods[c.name]});n.methods[c.name]=y}n.methods[c.signature]=u,n.methods[m]=u}else if(c.type==="event"){c.signature=_.encodeEventSignature(m);var p=n._on.bind(n,c.signature);(!n.events[c.name]||n.events[c.name].name==="bound ")&&(n.events[c.name]=p),n.events[c.signature]=p,n.events[m]=p}return c}),n.events.allEvents=n._on.bind(n,"allevents"),n._jsonInterface},get:function(){return n._jsonInterface},enumerable:!0});var g=this.constructor.defaultAccount,v=this.constructor.defaultBlock||"latest";Object.defineProperty(this,"handleRevert",{get:function(){return n.options.handleRevert===!1||n.options.handleRevert===!0?n.options.handleRevert:this.constructor.handleRevert},set:function(a){n.options.handleRevert=a},enumerable:!0}),Object.defineProperty(this,"defaultCommon",{get:function(){return n.options.common||this.constructor.defaultCommon},set:function(a){n.options.common=a},enumerable:!0}),Object.defineProperty(this,"defaultHardfork",{get:function(){return n.options.hardfork||this.constructor.defaultHardfork},set:function(a){n.options.hardfork=a},enumerable:!0}),Object.defineProperty(this,"defaultChain",{get:function(){return n.options.chain||this.constructor.defaultChain},set:function(a){n.options.chain=a},enumerable:!0}),Object.defineProperty(this,"transactionPollingTimeout",{get:function(){return n.options.transactionPollingTimeout===0?n.options.transactionPollingTimeout:n.options.transactionPollingTimeout||this.constructor.transactionPollingTimeout},set:function(a){n.options.transactionPollingTimeout=a},enumerable:!0}),Object.defineProperty(this,"transactionPollingInterval",{get:function(){return n.options.transactionPollingInterval===0?n.options.transactionPollingInterval:n.options.transactionPollingInterval||this.constructor.transactionPollingInterval},set:function(a){n.options.transactionPollingInterval=a},enumerable:!0}),Object.defineProperty(this,"transactionConfirmationBlocks",{get:function(){return n.options.transactionConfirmationBlocks===0?n.options.transactionConfirmationBlocks:n.options.transactionConfirmationBlocks||this.constructor.transactionConfirmationBlocks},set:function(a){n.options.transactionConfirmationBlocks=a},enumerable:!0}),Object.defineProperty(this,"transactionBlockTimeout",{get:function(){return n.options.transactionBlockTimeout===0?n.options.transactionBlockTimeout:n.options.transactionBlockTimeout||this.constructor.transactionBlockTimeout},set:function(a){n.options.transactionBlockTimeout=a},enumerable:!0}),Object.defineProperty(this,"blockHeaderTimeout",{get:function(){return n.options.blockHeaderTimeout===0?n.options.blockHeaderTimeout:n.options.blockHeaderTimeout||this.constructor.blockHeaderTimeout},set:function(a){n.options.blockHeaderTimeout=a},enumerable:!0}),Object.defineProperty(this,"defaultAccount",{get:function(){return g},set:function(a){return a&&(g=d.toChecksumAddress(f.inputAddressFormatter(a))),a},enumerable:!0}),Object.defineProperty(this,"defaultBlock",{get:function(){return v},set:function(a){return v=a,a},enumerable:!0}),this.methods={},this.events={},this._address=null,this._jsonInterface=[],this.options.address=e,this.options.jsonInterface=t};l.setProvider=function(r,t){k.packageInit(this,[r]),this._ethAccounts=t};l.prototype._getCallback=function(t){if(t&&!!t[t.length-1]&&typeof t[t.length-1]=="function")return t.pop()};l.prototype._checkListener=function(r,t){if(t===r)throw h.ContractReservedEventError(r)};l.prototype._getOrSetDefaultOptions=function(t){var e=t.gasPrice?String(t.gasPrice):null,o=t.from?d.toChecksumAddress(f.inputAddressFormatter(t.from)):null;return t.data=t.data||this.options.data,t.from=o||this.options.from,t.gasPrice=e||this.options.gasPrice,t.gas=t.gas||t.gasLimit||this.options.gas,delete t.gasLimit,t};l.prototype._encodeEventABI=function(r,t){t=t||{};var e=t.filter||{},o={};if(["fromBlock","toBlock"].filter(function(i){return t[i]!==void 0}).forEach(function(i){o[i]=f.inputBlockNumberFormatter(t[i])}),Array.isArray(t.topics))o.topics=t.topics;else{if(o.topics=[],r&&!r.anonymous&&r.name!=="ALLEVENTS"&&o.topics.push(r.signature),r.name!=="ALLEVENTS"){var n=r.inputs.filter(function(i){return i.indexed===!0}).map(function(i){var s=e[i.name];return s?Array.isArray(s)?s.map(function(g){return _.encodeParameter(i.type,g)}):_.encodeParameter(i.type,s):null});o.topics=o.topics.concat(n)}o.topics.length||delete o.topics}return this.options.address&&(o.address=this.options.address.toLowerCase()),o};l.prototype._decodeEventABI=function(r){var t=this;r.data=r.data||"",r.topics=r.topics||[];var e=f.outputLogFormatter(r);if(t.name==="ALLEVENTS"&&(t=t.jsonInterface.find(function(n){return n.signature===r.topics[0]})||{anonymous:!0}),t.inputs=t.inputs||[],!t.anonymous){let n=0;t.inputs.forEach(i=>i.indexed?n++:null),n>0&&r.topics.length!==n+1&&(t={anonymous:!0,inputs:[]})}var o=t.anonymous?r.topics:r.topics.slice(1);return e.returnValues=_.decodeLog(t.inputs,r.data,o),delete e.returnValues.__length__,e.event=t.name,e.signature=t.anonymous||!r.topics[0]?null:r.topics[0],e.raw={data:e.data,topics:e.topics},delete e.data,delete e.topics,e};l.prototype._encodeMethodABI=function(){var t=this._method.signature,e=this.arguments||[],o=!1,n=this._parent.options.jsonInterface.filter(function(s){return t==="constructor"&&s.type===t||(s.signature===t||s.signature===t.replace("0x","")||s.name===t)&&s.type==="function"}).map(function(s){var g=Array.isArray(s.inputs)?s.inputs.length:0;if(g!==e.length)throw new Error("The number of arguments is not matching the methods required number. You need to pass "+g+" arguments.");return s.type==="function"&&(o=s.signature),Array.isArray(s.inputs)?s.inputs:[]}).map(function(s){return _.encodeParameters(s,e).replace("0x","")})[0]||"";if(t==="constructor"){if(!this._deployData)throw new Error("The contract has no contract data option set. This is necessary to append the constructor parameters.");return this._deployData.startsWith("0x")||(this._deployData="0x"+this._deployData),this._deployData+n}var i=o?o+n:n;if(!i)throw new Error(`Couldn't find a matching contract method named "`+this._method.name+'".');return i};l.prototype._decodeMethodReturn=function(r,t){if(!t)return null;t=t.length>=2?t.slice(2):t;var e=_.decodeParameters(r,t);return e.__length__===1?e[0]:(delete e.__length__,e)};l.prototype.deploy=function(r,t){if(r=r||{},r.arguments=r.arguments||[],r=this._getOrSetDefaultOptions(r),!r.data){if(typeof t=="function")return t(h.ContractMissingDeployDataError());throw h.ContractMissingDeployDataError()}var e=this.options.jsonInterface.find(o=>o.type==="constructor")||{};return e.signature="constructor",this._createTxObject.apply({method:e,parent:this,deployData:r.data,_ethAccounts:this.constructor._ethAccounts},r.arguments)};l.prototype._generateEventOptions=function(){var r=Array.prototype.slice.call(arguments),t=this._getCallback(r),e=(!!r[r.length-1]&&typeof r[r.length-1])==="object"?r.pop():{},o=typeof r[0]=="string"?r[0]:"allevents",n=o.toLowerCase()==="allevents"?{name:"ALLEVENTS",jsonInterface:this.options.jsonInterface}:this.options.jsonInterface.find(function(i){return i.type==="event"&&(i.name===o||i.signature==="0x"+o.replace("0x",""))});if(!n)throw h.ContractEventDoesNotExistError(o);if(!d.isAddress(this.options.address))throw h.ContractNoAddressDefinedError();return{params:this._encodeEventABI(n,e),event:n,callback:t}};l.prototype.clone=function(){return new this.constructor(this.options.jsonInterface,this.options.address,this.options)};l.prototype.once=function(r,t,e){var o=Array.prototype.slice.call(arguments);if(e=this._getCallback(o),!e)throw h.ContractOnceRequiresCallbackError();t&&delete t.fromBlock,this._on(r,t,function(n,i,s){s.unsubscribe(),typeof e=="function"&&e(n,i,s)})};l.prototype._on=function(){var r=this._generateEventOptions.apply(this,arguments);r.params&&r.params.toBlock&&(delete r.params.toBlock,console.warn("Invalid option: toBlock. Use getPastEvents for specific range.")),this._checkListener("newListener",r.event.name),this._checkListener("removeListener",r.event.name);var t=new j({subscription:{params:1,inputFormatter:[f.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(r.event),subscriptionHandler:function(e){e.removed?this.emit("changed",e):this.emit("data",e),typeof this.callback=="function"&&this.callback(null,e,this)}},type:"eth",requestManager:this._requestManager});return t.subscribe("logs",r.params,r.callback||function(){}),t};l.prototype.getPastEvents=function(){var r=this._generateEventOptions.apply(this,arguments),t=new b({name:"getPastLogs",call:"eth_getLogs",params:1,inputFormatter:[f.inputLogFormatter],outputFormatter:this._decodeEventABI.bind(r.event)});t.setRequestManager(this._requestManager);var e=t.buildCall();return t=null,e(r.params,r.callback)};l.prototype._createTxObject=function(){var t=Array.prototype.slice.call(arguments),e={};if(this.method.type==="function"&&(e.call=this.parent._executeMethod.bind(e,"call"),e.call.request=this.parent._executeMethod.bind(e,"call",!0)),e.send=this.parent._executeMethod.bind(e,"send"),e.send.request=this.parent._executeMethod.bind(e,"send",!0),e.encodeABI=this.parent._encodeMethodABI.bind(e),e.estimateGas=this.parent._executeMethod.bind(e,"estimate"),e.createAccessList=this.parent._executeMethod.bind(e,"createAccessList"),t&&this.method.inputs&&t.length!==this.method.inputs.length){if(this.nextMethod)return this.nextMethod.apply(null,t);throw h.InvalidNumberOfParams(t.length,this.method.inputs.length,this.method.name)}return e.arguments=t||[],e._method=this.method,e._parent=this.parent,e._ethAccounts=this.parent.constructor._ethAccounts||this._ethAccounts,this.deployData&&(e._deployData=this.deployData),e};l.prototype._processExecuteArguments=function(t,e){var o={};if(o.type=t.shift(),o.callback=this._parent._getCallback(t),o.type==="call"&&t[t.length-1]!==!0&&(typeof t[t.length-1]=="string"||isFinite(t[t.length-1]))&&(o.defaultBlock=t.pop()),o.options=(!!t[t.length-1]&&typeof t[t.length-1])==="object"?t.pop():{},o.generateRequest=t[t.length-1]===!0?t.pop():!1,o.options=this._parent._getOrSetDefaultOptions(o.options),o.options.data=this.encodeABI(),!this._deployData&&!d.isAddress(this._parent.options.address))throw h.ContractNoAddressDefinedError();return this._deployData||(o.options.to=this._parent.options.address),o.options.data?o:d._fireError(new Error("Couldn't find a matching contract method, or the number of parameters is wrong."),e.eventEmitter,e.reject,o.callback)};l.prototype._executeMethod=function(){var t=this,e=this._parent._processExecuteArguments.call(this,Array.prototype.slice.call(arguments),o),o=D(e.type!=="send"),n=t.constructor._ethAccounts||t._ethAccounts;if(e.generateRequest){var i={params:[f.inputCallFormatter.call(this._parent,e.options)],callback:e.callback};return e.type==="call"?(i.params.push(f.inputDefaultBlockNumberFormatter.call(this._parent,e.defaultBlock)),i.method="eth_call",i.format=this._parent._decodeMethodReturn.bind(null,this._method.outputs)):i.method="eth_sendTransaction",i}switch(e.type){case"createAccessList":if(!d.isAddress(e.options.from))return d._fireError(h.ContractNoFromAddressDefinedError(),o.eventEmitter,o.reject,e.callback);var s=new b({name:"createAccessList",call:"eth_createAccessList",params:2,inputFormatter:[f.inputTransactionFormatter,f.inputDefaultBlockNumberFormatter],requestManager:t._parent._requestManager,accounts:n,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock}).createFunction();return s(e.options,e.callback);case"estimate":var g=new b({name:"estimateGas",call:"eth_estimateGas",params:1,inputFormatter:[f.inputCallFormatter],outputFormatter:d.hexToNumber,requestManager:t._parent._requestManager,accounts:n,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock}).createFunction();return g(e.options,e.callback);case"call":var v=new b({name:"call",call:"eth_call",params:2,inputFormatter:[f.inputCallFormatter,f.inputDefaultBlockNumberFormatter],outputFormatter:function(u){return t._parent._decodeMethodReturn(t._method.outputs,u)},requestManager:t._parent._requestManager,accounts:n,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock,handleRevert:t._parent.handleRevert,abiCoder:_}).createFunction();return v(e.options,e.defaultBlock,e.callback);case"send":if(!d.isAddress(e.options.from))return d._fireError(h.ContractNoFromAddressDefinedError(),o.eventEmitter,o.reject,e.callback);if(typeof this._method.payable=="boolean"&&!this._method.payable&&e.options.value&&e.options.value>0)return d._fireError(new Error("Can not send value to non-payable contract method or constructor"),o.eventEmitter,o.reject,e.callback);var a={receiptFormatter:function(u){if(Array.isArray(u.logs)){var m=u.logs.map(p=>t._parent._decodeEventABI.call({name:"ALLEVENTS",jsonInterface:t._parent.options.jsonInterface},p));u.events={};var y=0;m.forEach(function(p){p.event?u.events[p.event]?Array.isArray(u.events[p.event])?u.events[p.event].push(p):u.events[p.event]=[u.events[p.event],p]:u.events[p.event]=p:(u.events[y]=p,y++)}),delete u.logs}return u},contractDeployFormatter:function(u){var m=t._parent.clone();return m.options.address=u.contractAddress,m}},c=new b({name:"sendTransaction",call:"eth_sendTransaction",params:1,inputFormatter:[f.inputTransactionFormatter],requestManager:t._parent._requestManager,accounts:t.constructor._ethAccounts||t._ethAccounts,defaultAccount:t._parent.defaultAccount,defaultBlock:t._parent.defaultBlock,transactionBlockTimeout:t._parent.transactionBlockTimeout,transactionConfirmationBlocks:t._parent.transactionConfirmationBlocks,transactionPollingTimeout:t._parent.transactionPollingTimeout,transactionPollingInterval:t._parent.transactionPollingInterval,defaultCommon:t._parent.defaultCommon,defaultChain:t._parent.defaultChain,defaultHardfork:t._parent.defaultHardfork,handleRevert:t._parent.handleRevert,extraFormatters:a,abiCoder:_}).createFunction();return c(e.options,e.callback);default:throw new Error('Method "'+e.type+'" not implemented.')}};var U=l;export{U as l};
