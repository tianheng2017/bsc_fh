var B=(n,E,i)=>new Promise((c,d)=>{var e=a=>{try{m(i.next(a))}catch(F){d(F)}},f=a=>{try{m(i.throw(a))}catch(F){d(F)}},m=a=>a.done?c(a.value):Promise.resolve(a.value).then(e,f);m((i=i.apply(n,E)).next())});import{J as O,y as w,x as U,K as N,A as Y}from"./element-plus.2d443847.js";import{r as C}from"./index.a71cd9d1.js";import{P as I}from"./index.89655f46.js";import{d as T,s as k,$ as G,e as L,o as A,c as D,U as t,L as s,a as p,S,T as V,u as b,K as P,R as v}from"./@vue.230e89ba.js";function se(){return C.get({url:"/setting.storage/lists"})}function J(n){return C.post({url:"/setting.storage/setup",params:n})}function M(n){return C.get({url:"/setting.storage/detail",params:n})}const $={class:"edit-popup"},j={class:"form-tips"},z={key:0},H={class:"flex-1"},Q={class:"flex-1"},W=p("div",{class:"form-tips"}," \u8BF7\u8865\u5168http://\u6216https://\uFF0C\u4F8B\u5982https://static.cloud.com ",-1),X=S("\u505C\u7528"),Z=S("\u542F\u7528"),ae=T({__name:"edit",emits:["success"],setup(n,{expose:E,emit:i}){const c=k(),d=k(),e=G({engine:"",bucket:"",access_key:"",secret_key:"",domain:"",region:"",status:0}),f=[{name:"\u672C\u5730\u5B58\u50A8",type:"local",tips:"\u672C\u5730\u5B58\u50A8\u65B9\u5F0F\u4E0D\u9700\u8981\u914D\u7F6E\u5176\u4ED6\u53C2\u6570"},{name:"\u4E03\u725B\u4E91\u5B58\u50A8",type:"qiniu",tips:"\u5207\u6362\u4E03\u725B\u4E91\u5B58\u50A8\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u4E03\u725B\u4E91"},{name:"\u963F\u91CC\u4E91OSS",type:"aliyun",tips:"\u5207\u6362\u963F\u91CC\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u963F\u91CC\u4E91OSS"},{name:"\u817E\u8BAF\u4E91OSS",type:"qcloud",tips:"\u5207\u6362\u817E\u8BAF\u4E91OSS\u540E\uFF0C\u7D20\u6750\u5E93\u9700\u8981\u91CD\u65B0\u4E0A\u4F20\u81F3\u817E\u8BAF\u4E91OSS"}],m={bucket:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",trigger:"blur"}],access_key:[{required:!0,message:"\u8BF7\u8F93\u5165ACCESS_KEY",trigger:"blur"}],secret_key:[{required:!0,message:"\u8BF7\u8F93\u5165SECRET_KEY",trigger:"blur"}],domain:[{required:!0,message:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D",trigger:"blur"}],region:[{required:!0,message:"\u8BF7\u8F93\u5165REGION",trigger:"blur"}]},a=L(()=>f.find(l=>l.type==e.engine)),F=()=>B(this,null,function*(){var l,u;yield(l=c.value)==null?void 0:l.validate(),yield J(e),(u=d.value)==null||u.close(),i("success")}),R=()=>B(this,null,function*(){const l=yield M({engine:e.engine});for(const u in l)e[u]=l[u]}),h=l=>{var u;e.engine=l,(u=d.value)==null||u.open(),R()},K=()=>{var l;(l=c.value)==null||l.resetFields()};return E({open:h}),(l,u)=>{const g=O,r=w,_=U,q=N,x=Y;return A(),D("div",$,[t(I,{ref_key:"popupRef",ref:d,title:"\u8BBE\u7F6E\u5B58\u50A8",async:!0,width:"550px",clickModalClose:!0,onConfirm:F,onClose:K},{default:s(()=>[t(x,{ref_key:"formRef",ref:c,model:e,"label-width":"120px",rules:m},{default:s(()=>[t(r,{label:"\u5B58\u50A8\u65B9\u5F0F",prop:"engine"},{default:s(()=>{var o;return[p("div",null,[t(g,{"model-value":""},{default:s(()=>{var y;return[S(V((y=b(a))==null?void 0:y.name),1)]}),_:1}),p("div",j,V((o=b(a))==null?void 0:o.tips),1)])]}),_:1}),e.engine!=="local"?(A(),D("div",z,[t(r,{label:" \u5B58\u50A8\u7A7A\u95F4\u540D\u79F0",prop:"bucket"},{default:s(()=>[p("div",H,[t(_,{modelValue:e.bucket,"onUpdate:modelValue":u[0]||(u[0]=o=>e.bucket=o),placeholder:"\u8BF7\u8F93\u5165\u5B58\u50A8\u7A7A\u95F4\u540D\u79F0(Bucket)"},null,8,["modelValue"])])]),_:1}),t(r,{label:"ACCESS_KEY",prop:"access_key"},{default:s(()=>[t(_,{modelValue:e.access_key,"onUpdate:modelValue":u[1]||(u[1]=o=>e.access_key=o),placeholder:"\u8BF7\u8F93\u5165ACCESS_KEY(AK)"},null,8,["modelValue"])]),_:1}),t(r,{label:"SECRET_KEY",prop:"secret_key"},{default:s(()=>[t(_,{modelValue:e.secret_key,"onUpdate:modelValue":u[2]||(u[2]=o=>e.secret_key=o),placeholder:"\u8BF7\u8F93\u5165SECRET_KEY(SK)"},null,8,["modelValue"])]),_:1}),t(r,{label:"\u7A7A\u95F4\u57DF\u540D",prop:"domain"},{default:s(()=>[p("div",Q,[p("div",null,[t(_,{modelValue:e.domain,"onUpdate:modelValue":u[3]||(u[3]=o=>e.domain=o),placeholder:"\u8BF7\u8F93\u5165\u7A7A\u95F4\u57DF\u540D(Domain)"},null,8,["modelValue"])]),W])]),_:1}),e.engine=="qcloud"?(A(),P(r,{key:0,label:"REGION",prop:"region"},{default:s(()=>[t(_,{modelValue:e.region,"onUpdate:modelValue":u[4]||(u[4]=o=>e.region=o),placeholder:"\u8BF7\u8F93\u5165region"},null,8,["modelValue"])]),_:1})):v("",!0)])):v("",!0),t(r,{label:"\u72B6\u6001",prop:"status"},{default:s(()=>[t(q,{modelValue:e.status,"onUpdate:modelValue":u[5]||(u[5]=o=>e.status=o)},{default:s(()=>[t(g,{label:0},{default:s(()=>[X]),_:1}),t(g,{label:1},{default:s(()=>[Z]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},512)])}}});export{ae as _,se as s};
