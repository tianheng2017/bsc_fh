import{c as Ye}from"./@ethereumjs.af3f5dff.js";import{r as $e,d as Ke}from"./rollup-plugin-node-polyfills.dd1027b1.js";import{b as Me}from"./buffer.b4004db0.js";import{r as X}from"./inherits.66060a12.js";import{r as tr}from"./util-deprecate.e6516745.js";import{r as De}from"./string_decoder.87146aa7.js";var te={exports:{}},he,Pe;function Xe(){return Pe||(Pe=1,he=$e.EventEmitter),he}var ce,Ne;function ir(){if(Ne)return ce;Ne=1;function T(o,h){var l=Object.keys(o);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(o);h&&(c=c.filter(function(w){return Object.getOwnPropertyDescriptor(o,w).enumerable})),l.push.apply(l,c)}return l}function v(o){for(var h=1;h<arguments.length;h++){var l=arguments[h]!=null?arguments[h]:{};h%2?T(Object(l),!0).forEach(function(c){E(o,c,l[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(l)):T(Object(l)).forEach(function(c){Object.defineProperty(o,c,Object.getOwnPropertyDescriptor(l,c))})}return o}function E(o,h,l){return h in o?Object.defineProperty(o,h,{value:l,enumerable:!0,configurable:!0,writable:!0}):o[h]=l,o}function A(o,h){if(!(o instanceof h))throw new TypeError("Cannot call a class as a function")}function O(o,h){for(var l=0;l<h.length;l++){var c=h[l];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(o,c.key,c)}}function s(o,h,l){return h&&O(o.prototype,h),l&&O(o,l),o}var b=Me,a=b.Buffer,n=Ke,d=n.inspect,p=d&&d.custom||"inspect";function g(o,h,l){a.prototype.copy.call(o,h,l)}return ce=function(){function o(){A(this,o),this.head=null,this.tail=null,this.length=0}return s(o,[{key:"push",value:function(l){var c={data:l,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(l){var c={data:l,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var l=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,l}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(l){if(this.length===0)return"";for(var c=this.head,w=""+c.data;c=c.next;)w+=l+c.data;return w}},{key:"concat",value:function(l){if(this.length===0)return a.alloc(0);for(var c=a.allocUnsafe(l>>>0),w=this.head,m=0;w;)g(w.data,c,m),m+=w.data.length,w=w.next;return c}},{key:"consume",value:function(l,c){var w;return l<this.head.data.length?(w=this.head.data.slice(0,l),this.head.data=this.head.data.slice(l)):l===this.head.data.length?w=this.shift():w=c?this._getString(l):this._getBuffer(l),w}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(l){var c=this.head,w=1,m=c.data;for(l-=m.length;c=c.next;){var y=c.data,R=l>y.length?y.length:l;if(R===y.length?m+=y:m+=y.slice(0,l),l-=R,l===0){R===y.length?(++w,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=y.slice(R));break}++w}return this.length-=w,m}},{key:"_getBuffer",value:function(l){var c=a.allocUnsafe(l),w=this.head,m=1;for(w.data.copy(c),l-=w.data.length;w=w.next;){var y=w.data,R=l>y.length?y.length:l;if(y.copy(c,c.length-l,0,R),l-=R,l===0){R===y.length?(++m,w.next?this.head=w.next:this.head=this.tail=null):(this.head=w,w.data=y.slice(R));break}++m}return this.length-=m,c}},{key:p,value:function(l,c){return d(this,v({},c,{depth:0,customInspect:!1}))}}]),o}(),ce}var pe,qe;function ze(){if(qe)return pe;qe=1;function T(b,a){var n=this,d=this._readableState&&this._readableState.destroyed,p=this._writableState&&this._writableState.destroyed;return d||p?(a?a(b):b&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(O,this,b)):process.nextTick(O,this,b)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(b||null,function(g){!a&&g?n._writableState?n._writableState.errorEmitted?process.nextTick(E,n):(n._writableState.errorEmitted=!0,process.nextTick(v,n,g)):process.nextTick(v,n,g):a?(process.nextTick(E,n),a(g)):process.nextTick(E,n)}),this)}function v(b,a){O(b,a),E(b)}function E(b){b._writableState&&!b._writableState.emitClose||b._readableState&&!b._readableState.emitClose||b.emit("close")}function A(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function O(b,a){b.emit("error",a)}function s(b,a){var n=b._readableState,d=b._writableState;n&&n.autoDestroy||d&&d.autoDestroy?b.destroy(a):b.emit("error",a)}return pe={destroy:T,undestroy:A,errorOrDestroy:s},pe}var be={},Ce;function Y(){if(Ce)return be;Ce=1;function T(a,n){a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.__proto__=n}var v={};function E(a,n,d){d||(d=Error);function p(o,h,l){return typeof n=="string"?n:n(o,h,l)}var g=function(o){T(h,o);function h(l,c,w){return o.call(this,p(l,c,w))||this}return h}(d);g.prototype.name=d.name,g.prototype.code=a,v[a]=g}function A(a,n){if(Array.isArray(a)){var d=a.length;return a=a.map(function(p){return String(p)}),d>2?"one of ".concat(n," ").concat(a.slice(0,d-1).join(", "),", or ")+a[d-1]:d===2?"one of ".concat(n," ").concat(a[0]," or ").concat(a[1]):"of ".concat(n," ").concat(a[0])}else return"of ".concat(n," ").concat(String(a))}function O(a,n,d){return a.substr(!d||d<0?0:+d,n.length)===n}function s(a,n,d){return(d===void 0||d>a.length)&&(d=a.length),a.substring(d-n.length,d)===n}function b(a,n,d){return typeof d!="number"&&(d=0),d+n.length>a.length?!1:a.indexOf(n,d)!==-1}return E("ERR_INVALID_OPT_VALUE",function(a,n){return'The value "'+n+'" is invalid for option "'+a+'"'},TypeError),E("ERR_INVALID_ARG_TYPE",function(a,n,d){var p;typeof n=="string"&&O(n,"not ")?(p="must not be",n=n.replace(/^not /,"")):p="must be";var g;if(s(a," argument"))g="The ".concat(a," ").concat(p," ").concat(A(n,"type"));else{var o=b(a,".")?"property":"argument";g='The "'.concat(a,'" ').concat(o," ").concat(p," ").concat(A(n,"type"))}return g+=". Received type ".concat(typeof d),g},TypeError),E("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),E("ERR_METHOD_NOT_IMPLEMENTED",function(a){return"The "+a+" method is not implemented"}),E("ERR_STREAM_PREMATURE_CLOSE","Premature close"),E("ERR_STREAM_DESTROYED",function(a){return"Cannot call "+a+" after a stream was destroyed"}),E("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),E("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),E("ERR_STREAM_WRITE_AFTER_END","write after end"),E("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),E("ERR_UNKNOWN_ENCODING",function(a){return"Unknown encoding: "+a},TypeError),E("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),be.codes=v,be}var _e,Ie;function Je(){if(Ie)return _e;Ie=1;var T=Y().codes.ERR_INVALID_OPT_VALUE;function v(A,O,s){return A.highWaterMark!=null?A.highWaterMark:O?A[s]:null}function E(A,O,s,b){var a=v(O,b,s);if(a!=null){if(!(isFinite(a)&&Math.floor(a)===a)||a<0){var n=b?s:"highWaterMark";throw new T(n,a)}return Math.floor(a)}return A.objectMode?16:16*1024}return _e={getHighWaterMark:E},_e}var ge,je;function Qe(){if(je)return ge;je=1,ge=N;function T(i){var t=this;this.next=null,this.entry=null,this.finish=function(){le(t,i)}}var v;N.WritableState=j;var E={deprecate:tr()},A=Xe(),O=Me.Buffer,s=Ye.Uint8Array||function(){};function b(i){return O.from(i)}function a(i){return O.isBuffer(i)||i instanceof s}var n=ze(),d=Je(),p=d.getHighWaterMark,g=Y().codes,o=g.ERR_INVALID_ARG_TYPE,h=g.ERR_METHOD_NOT_IMPLEMENTED,l=g.ERR_MULTIPLE_CALLBACK,c=g.ERR_STREAM_CANNOT_PIPE,w=g.ERR_STREAM_DESTROYED,m=g.ERR_STREAM_NULL_VALUES,y=g.ERR_STREAM_WRITE_AFTER_END,R=g.ERR_UNKNOWN_ENCODING,M=n.errorOrDestroy;X()(N,A);function C(){}function j(i,t,u){v=v||V(),i=i||{},typeof u!="boolean"&&(u=t instanceof v),this.objectMode=!!i.objectMode,u&&(this.objectMode=this.objectMode||!!i.writableObjectMode),this.highWaterMark=p(this,i,"writableHighWaterMark",u),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var S=i.decodeStrings===!1;this.decodeStrings=!S,this.defaultEncoding=i.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(P){ae(t,P)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=i.emitClose!==!1,this.autoDestroy=!!i.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new T(this)}j.prototype.getBuffer=function(){for(var t=this.bufferedRequest,u=[];t;)u.push(t),t=t.next;return u},function(){try{Object.defineProperty(j.prototype,"buffer",{get:E.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(i){}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(N,Symbol.hasInstance,{value:function(t){return k.call(this,t)?!0:this!==N?!1:t&&t._writableState instanceof j}})):k=function(t){return t instanceof this};function N(i){v=v||V();var t=this instanceof v;if(!t&&!k.call(N,this))return new N(i);this._writableState=new j(i,this,t),this.writable=!0,i&&(typeof i.write=="function"&&(this._write=i.write),typeof i.writev=="function"&&(this._writev=i.writev),typeof i.destroy=="function"&&(this._destroy=i.destroy),typeof i.final=="function"&&(this._final=i.final)),A.call(this)}N.prototype.pipe=function(){M(this,new c)};function D(i,t){var u=new y;M(i,u),process.nextTick(t,u)}function z(i,t,u,S){var P;return u===null?P=new m:typeof u!="string"&&!t.objectMode&&(P=new o("chunk",["string","Buffer"],u)),P?(M(i,P),process.nextTick(S,P),!1):!0}N.prototype.write=function(i,t,u){var S=this._writableState,P=!1,e=!S.objectMode&&a(i);return e&&!O.isBuffer(i)&&(i=b(i)),typeof t=="function"&&(u=t,t=null),e?t="buffer":t||(t=S.defaultEncoding),typeof u!="function"&&(u=C),S.ending?D(this,u):(e||z(this,S,i,u))&&(S.pendingcb++,P=ie(this,S,e,i,t,u)),P},N.prototype.cork=function(){this._writableState.corked++},N.prototype.uncork=function(){var i=this._writableState;i.corked&&(i.corked--,!i.writing&&!i.corked&&!i.bufferProcessing&&i.bufferedRequest&&x(this,i))},N.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new R(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(N.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $(i,t,u){return!i.objectMode&&i.decodeStrings!==!1&&typeof t=="string"&&(t=O.from(t,u)),t}Object.defineProperty(N.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function ie(i,t,u,S,P,e){if(!u){var r=$(t,S,P);S!==r&&(u=!0,P="buffer",S=r)}var f=t.objectMode?1:S.length;t.length+=f;var _=t.length<t.highWaterMark;if(_||(t.needDrain=!0),t.writing||t.corked){var I=t.lastBufferedRequest;t.lastBufferedRequest={chunk:S,encoding:P,isBuf:u,callback:e,next:null},I?I.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else U(i,t,!1,f,S,P,e);return _}function U(i,t,u,S,P,e,r){t.writelen=S,t.writecb=r,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new w("write")):u?i._writev(P,t.onwrite):i._write(P,e,t.onwrite),t.sync=!1}function ne(i,t,u,S,P){--t.pendingcb,u?(process.nextTick(P,S),process.nextTick(B,i,t),i._writableState.errorEmitted=!0,M(i,S)):(P(S),i._writableState.errorEmitted=!0,M(i,S),B(i,t))}function J(i){i.writing=!1,i.writecb=null,i.length-=i.writelen,i.writelen=0}function ae(i,t){var u=i._writableState,S=u.sync,P=u.writecb;if(typeof P!="function")throw new l;if(J(u),t)ne(i,u,S,t,P);else{var e=Z(u)||i.destroyed;!e&&!u.corked&&!u.bufferProcessing&&u.bufferedRequest&&x(i,u),S?process.nextTick(W,i,u,e,P):W(i,u,e,P)}}function W(i,t,u,S){u||Q(i,t),t.pendingcb--,S(),B(i,t)}function Q(i,t){t.length===0&&t.needDrain&&(t.needDrain=!1,i.emit("drain"))}function x(i,t){t.bufferProcessing=!0;var u=t.bufferedRequest;if(i._writev&&u&&u.next){var S=t.bufferedRequestCount,P=new Array(S),e=t.corkedRequestsFree;e.entry=u;for(var r=0,f=!0;u;)P[r]=u,u.isBuf||(f=!1),u=u.next,r+=1;P.allBuffers=f,U(i,t,!0,t.length,P,"",e.finish),t.pendingcb++,t.lastBufferedRequest=null,e.next?(t.corkedRequestsFree=e.next,e.next=null):t.corkedRequestsFree=new T(t),t.bufferedRequestCount=0}else{for(;u;){var _=u.chunk,I=u.encoding,L=u.callback,q=t.objectMode?1:_.length;if(U(i,t,!1,q,_,I,L),u=u.next,t.bufferedRequestCount--,t.writing)break}u===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=u,t.bufferProcessing=!1}N.prototype._write=function(i,t,u){u(new h("_write()"))},N.prototype._writev=null,N.prototype.end=function(i,t,u){var S=this._writableState;return typeof i=="function"?(u=i,i=null,t=null):typeof t=="function"&&(u=t,t=null),i!=null&&this.write(i,t),S.corked&&(S.corked=1,this.uncork()),S.ending||oe(this,S,u),this},Object.defineProperty(N.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Z(i){return i.ending&&i.length===0&&i.bufferedRequest===null&&!i.finished&&!i.writing}function fe(i,t){i._final(function(u){t.pendingcb--,u&&M(i,u),t.prefinished=!0,i.emit("prefinish"),B(i,t)})}function ee(i,t){!t.prefinished&&!t.finalCalled&&(typeof i._final=="function"&&!t.destroyed?(t.pendingcb++,t.finalCalled=!0,process.nextTick(fe,i,t)):(t.prefinished=!0,i.emit("prefinish")))}function B(i,t){var u=Z(t);if(u&&(ee(i,t),t.pendingcb===0&&(t.finished=!0,i.emit("finish"),t.autoDestroy))){var S=i._readableState;(!S||S.autoDestroy&&S.endEmitted)&&i.destroy()}return u}function oe(i,t,u){t.ending=!0,B(i,t),u&&(t.finished?process.nextTick(u):i.once("finish",u)),t.ended=!0,i.writable=!1}function le(i,t,u){var S=i.entry;for(i.entry=null;S;){var P=S.callback;t.pendingcb--,P(u),S=S.next}t.corkedRequestsFree.next=i}return Object.defineProperty(N.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){!this._writableState||(this._writableState.destroyed=t)}}),N.prototype.destroy=n.destroy,N.prototype._undestroy=n.undestroy,N.prototype._destroy=function(i,t){t(i)},ge}var ye,ke;function V(){if(ke)return ye;ke=1;var T=Object.keys||function(d){var p=[];for(var g in d)p.push(g);return p};ye=b;var v=Ze(),E=Qe();X()(b,v);for(var A=T(E.prototype),O=0;O<A.length;O++){var s=A[O];b.prototype[s]||(b.prototype[s]=E.prototype[s])}function b(d){if(!(this instanceof b))return new b(d);v.call(this,d),E.call(this,d),this.allowHalfOpen=!0,d&&(d.readable===!1&&(this.readable=!1),d.writable===!1&&(this.writable=!1),d.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",a)))}Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function a(){this._writableState.ended||process.nextTick(n,this)}function n(d){d.end()}return Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(p){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=p,this._writableState.destroyed=p)}}),ye}var ve,We;function Oe(){if(We)return ve;We=1;var T=Y().codes.ERR_STREAM_PREMATURE_CLOSE;function v(s){var b=!1;return function(){if(!b){b=!0;for(var a=arguments.length,n=new Array(a),d=0;d<a;d++)n[d]=arguments[d];s.apply(this,n)}}}function E(){}function A(s){return s.setHeader&&typeof s.abort=="function"}function O(s,b,a){if(typeof b=="function")return O(s,null,b);b||(b={}),a=v(a||E);var n=b.readable||b.readable!==!1&&s.readable,d=b.writable||b.writable!==!1&&s.writable,p=function(){s.writable||o()},g=s._writableState&&s._writableState.finished,o=function(){d=!1,g=!0,n||a.call(s)},h=s._readableState&&s._readableState.endEmitted,l=function(){n=!1,h=!0,d||a.call(s)},c=function(R){a.call(s,R)},w=function(){var R;if(n&&!h)return(!s._readableState||!s._readableState.ended)&&(R=new T),a.call(s,R);if(d&&!g)return(!s._writableState||!s._writableState.ended)&&(R=new T),a.call(s,R)},m=function(){s.req.on("finish",o)};return A(s)?(s.on("complete",o),s.on("abort",w),s.req?m():s.on("request",m)):d&&!s._writableState&&(s.on("end",p),s.on("close",p)),s.on("end",l),s.on("finish",o),b.error!==!1&&s.on("error",c),s.on("close",w),function(){s.removeListener("complete",o),s.removeListener("abort",w),s.removeListener("request",m),s.req&&s.req.removeListener("finish",o),s.removeListener("end",p),s.removeListener("close",p),s.removeListener("finish",o),s.removeListener("end",l),s.removeListener("error",c),s.removeListener("close",w)}}return ve=O,ve}var we,Be;function nr(){if(Be)return we;Be=1;var T;function v(m,y,R){return y in m?Object.defineProperty(m,y,{value:R,enumerable:!0,configurable:!0,writable:!0}):m[y]=R,m}var E=Oe(),A=Symbol("lastResolve"),O=Symbol("lastReject"),s=Symbol("error"),b=Symbol("ended"),a=Symbol("lastPromise"),n=Symbol("handlePromise"),d=Symbol("stream");function p(m,y){return{value:m,done:y}}function g(m){var y=m[A];if(y!==null){var R=m[d].read();R!==null&&(m[a]=null,m[A]=null,m[O]=null,y(p(R,!1)))}}function o(m){process.nextTick(g,m)}function h(m,y){return function(R,M){m.then(function(){if(y[b]){R(p(void 0,!0));return}y[n](R,M)},M)}}var l=Object.getPrototypeOf(function(){}),c=Object.setPrototypeOf((T={get stream(){return this[d]},next:function(){var y=this,R=this[s];if(R!==null)return Promise.reject(R);if(this[b])return Promise.resolve(p(void 0,!0));if(this[d].destroyed)return new Promise(function(k,N){process.nextTick(function(){y[s]?N(y[s]):k(p(void 0,!0))})});var M=this[a],C;if(M)C=new Promise(h(M,this));else{var j=this[d].read();if(j!==null)return Promise.resolve(p(j,!1));C=new Promise(this[n])}return this[a]=C,C}},v(T,Symbol.asyncIterator,function(){return this}),v(T,"return",function(){var y=this;return new Promise(function(R,M){y[d].destroy(null,function(C){if(C){M(C);return}R(p(void 0,!0))})})}),T),l),w=function(y){var R,M=Object.create(c,(R={},v(R,d,{value:y,writable:!0}),v(R,A,{value:null,writable:!0}),v(R,O,{value:null,writable:!0}),v(R,s,{value:null,writable:!0}),v(R,b,{value:y._readableState.endEmitted,writable:!0}),v(R,n,{value:function(j,k){var N=M[d].read();N?(M[a]=null,M[A]=null,M[O]=null,j(p(N,!1))):(M[A]=j,M[O]=k)},writable:!0}),R));return M[a]=null,E(y,function(C){if(C&&C.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=M[O];j!==null&&(M[a]=null,M[A]=null,M[O]=null,j(C)),M[s]=C;return}var k=M[A];k!==null&&(M[a]=null,M[A]=null,M[O]=null,k(p(void 0,!0))),M[b]=!0}),y.on("readable",o.bind(null,M)),M};return we=w,we}var Re,Ue;function ar(){return Ue||(Ue=1,Re=function(){throw new Error("Readable.from is not available in the browser")}),Re}var Ee,xe;function Ze(){if(xe)return Ee;xe=1,Ee=D;var T;D.ReadableState=N,$e.EventEmitter;var v=function(r,f){return r.listeners(f).length},E=Xe(),A=Me.Buffer,O=Ye.Uint8Array||function(){};function s(e){return A.from(e)}function b(e){return A.isBuffer(e)||e instanceof O}var a=Ke,n;a&&a.debuglog?n=a.debuglog("stream"):n=function(){};var d=ir(),p=ze(),g=Je(),o=g.getHighWaterMark,h=Y().codes,l=h.ERR_INVALID_ARG_TYPE,c=h.ERR_STREAM_PUSH_AFTER_EOF,w=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,y,R,M;X()(D,E);var C=p.errorOrDestroy,j=["error","close","destroy","pause","resume"];function k(e,r,f){if(typeof e.prependListener=="function")return e.prependListener(r,f);!e._events||!e._events[r]?e.on(r,f):Array.isArray(e._events[r])?e._events[r].unshift(f):e._events[r]=[f,e._events[r]]}function N(e,r,f){T=T||V(),e=e||{},typeof f!="boolean"&&(f=r instanceof T),this.objectMode=!!e.objectMode,f&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=o(this,e,"readableHighWaterMark",f),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=e.emitClose!==!1,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(y||(y=De().StringDecoder),this.decoder=new y(e.encoding),this.encoding=e.encoding)}function D(e){if(T=T||V(),!(this instanceof D))return new D(e);var r=this instanceof T;this._readableState=new N(e,this,r),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),E.call(this)}Object.defineProperty(D.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(r){!this._readableState||(this._readableState.destroyed=r)}}),D.prototype.destroy=p.destroy,D.prototype._undestroy=p.undestroy,D.prototype._destroy=function(e,r){r(e)},D.prototype.push=function(e,r){var f=this._readableState,_;return f.objectMode?_=!0:typeof e=="string"&&(r=r||f.defaultEncoding,r!==f.encoding&&(e=A.from(e,r),r=""),_=!0),z(this,e,r,!1,_)},D.prototype.unshift=function(e){return z(this,e,null,!0,!1)};function z(e,r,f,_,I){n("readableAddChunk",r);var L=e._readableState;if(r===null)L.reading=!1,ae(e,L);else{var q;if(I||(q=ie(L,r)),q)C(e,q);else if(L.objectMode||r&&r.length>0)if(typeof r!="string"&&!L.objectMode&&Object.getPrototypeOf(r)!==A.prototype&&(r=s(r)),_)L.endEmitted?C(e,new m):$(e,L,r,!0);else if(L.ended)C(e,new c);else{if(L.destroyed)return!1;L.reading=!1,L.decoder&&!f?(r=L.decoder.write(r),L.objectMode||r.length!==0?$(e,L,r,!1):x(e,L)):$(e,L,r,!1)}else _||(L.reading=!1,x(e,L))}return!L.ended&&(L.length<L.highWaterMark||L.length===0)}function $(e,r,f,_){r.flowing&&r.length===0&&!r.sync?(r.awaitDrain=0,e.emit("data",f)):(r.length+=r.objectMode?1:f.length,_?r.buffer.unshift(f):r.buffer.push(f),r.needReadable&&W(e)),x(e,r)}function ie(e,r){var f;return!b(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(f=new l("chunk",["string","Buffer","Uint8Array"],r)),f}D.prototype.isPaused=function(){return this._readableState.flowing===!1},D.prototype.setEncoding=function(e){y||(y=De().StringDecoder);var r=new y(e);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var f=this._readableState.buffer.head,_="";f!==null;)_+=r.write(f.data),f=f.next;return this._readableState.buffer.clear(),_!==""&&this._readableState.buffer.push(_),this._readableState.length=_.length,this};var U=1073741824;function ne(e){return e>=U?e=U:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function J(e,r){return e<=0||r.length===0&&r.ended?0:r.objectMode?1:e!==e?r.flowing&&r.length?r.buffer.head.data.length:r.length:(e>r.highWaterMark&&(r.highWaterMark=ne(e)),e<=r.length?e:r.ended?r.length:(r.needReadable=!0,0))}D.prototype.read=function(e){n("read",e),e=parseInt(e,10);var r=this._readableState,f=e;if(e!==0&&(r.emittedReadable=!1),e===0&&r.needReadable&&((r.highWaterMark!==0?r.length>=r.highWaterMark:r.length>0)||r.ended))return n("read: emitReadable",r.length,r.ended),r.length===0&&r.ended?u(this):W(this),null;if(e=J(e,r),e===0&&r.ended)return r.length===0&&u(this),null;var _=r.needReadable;n("need readable",_),(r.length===0||r.length-e<r.highWaterMark)&&(_=!0,n("length less than watermark",_)),r.ended||r.reading?(_=!1,n("reading or ended",_)):_&&(n("do read"),r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=J(f,r)));var I;return e>0?I=t(e,r):I=null,I===null?(r.needReadable=r.length<=r.highWaterMark,e=0):(r.length-=e,r.awaitDrain=0),r.length===0&&(r.ended||(r.needReadable=!0),f!==e&&r.ended&&u(this)),I!==null&&this.emit("data",I),I};function ae(e,r){if(n("onEofChunk"),!r.ended){if(r.decoder){var f=r.decoder.end();f&&f.length&&(r.buffer.push(f),r.length+=r.objectMode?1:f.length)}r.ended=!0,r.sync?W(e):(r.needReadable=!1,r.emittedReadable||(r.emittedReadable=!0,Q(e)))}}function W(e){var r=e._readableState;n("emitReadable",r.needReadable,r.emittedReadable),r.needReadable=!1,r.emittedReadable||(n("emitReadable",r.flowing),r.emittedReadable=!0,process.nextTick(Q,e))}function Q(e){var r=e._readableState;n("emitReadable_",r.destroyed,r.length,r.ended),!r.destroyed&&(r.length||r.ended)&&(e.emit("readable"),r.emittedReadable=!1),r.needReadable=!r.flowing&&!r.ended&&r.length<=r.highWaterMark,i(e)}function x(e,r){r.readingMore||(r.readingMore=!0,process.nextTick(Z,e,r))}function Z(e,r){for(;!r.reading&&!r.ended&&(r.length<r.highWaterMark||r.flowing&&r.length===0);){var f=r.length;if(n("maybeReadMore read 0"),e.read(0),f===r.length)break}r.readingMore=!1}D.prototype._read=function(e){C(this,new w("_read()"))},D.prototype.pipe=function(e,r){var f=this,_=this._readableState;switch(_.pipesCount){case 0:_.pipes=e;break;case 1:_.pipes=[_.pipes,e];break;default:_.pipes.push(e);break}_.pipesCount+=1,n("pipe count=%d opts=%j",_.pipesCount,r);var I=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,L=I?F:K;_.endEmitted?process.nextTick(L):f.once("end",L),e.on("unpipe",q);function q(H,G){n("onunpipe"),H===f&&G&&G.hasUnpiped===!1&&(G.hasUnpiped=!0,rr())}function F(){n("onend"),e.end()}var re=fe(f);e.on("drain",re);var Ae=!1;function rr(){n("cleanup"),e.removeListener("close",se),e.removeListener("finish",de),e.removeListener("drain",re),e.removeListener("error",ue),e.removeListener("unpipe",q),f.removeListener("end",F),f.removeListener("end",K),f.removeListener("data",Le),Ae=!0,_.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&re()}f.on("data",Le);function Le(H){n("ondata");var G=e.write(H);n("dest.write",G),G===!1&&((_.pipesCount===1&&_.pipes===e||_.pipesCount>1&&P(_.pipes,e)!==-1)&&!Ae&&(n("false write response, pause",_.awaitDrain),_.awaitDrain++),f.pause())}function ue(H){n("onerror",H),K(),e.removeListener("error",ue),v(e,"error")===0&&C(e,H)}k(e,"error",ue);function se(){e.removeListener("finish",de),K()}e.once("close",se);function de(){n("onfinish"),e.removeListener("close",se),K()}e.once("finish",de);function K(){n("unpipe"),f.unpipe(e)}return e.emit("pipe",f),_.flowing||(n("pipe resume"),f.resume()),e};function fe(e){return function(){var f=e._readableState;n("pipeOnDrain",f.awaitDrain),f.awaitDrain&&f.awaitDrain--,f.awaitDrain===0&&v(e,"data")&&(f.flowing=!0,i(e))}}D.prototype.unpipe=function(e){var r=this._readableState,f={hasUnpiped:!1};if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,e&&e.emit("unpipe",this,f),this);if(!e){var _=r.pipes,I=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var L=0;L<I;L++)_[L].emit("unpipe",this,{hasUnpiped:!1});return this}var q=P(r.pipes,e);return q===-1?this:(r.pipes.splice(q,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this,f),this)},D.prototype.on=function(e,r){var f=E.prototype.on.call(this,e,r),_=this._readableState;return e==="data"?(_.readableListening=this.listenerCount("readable")>0,_.flowing!==!1&&this.resume()):e==="readable"&&!_.endEmitted&&!_.readableListening&&(_.readableListening=_.needReadable=!0,_.flowing=!1,_.emittedReadable=!1,n("on readable",_.length,_.reading),_.length?W(this):_.reading||process.nextTick(B,this)),f},D.prototype.addListener=D.prototype.on,D.prototype.removeListener=function(e,r){var f=E.prototype.removeListener.call(this,e,r);return e==="readable"&&process.nextTick(ee,this),f},D.prototype.removeAllListeners=function(e){var r=E.prototype.removeAllListeners.apply(this,arguments);return(e==="readable"||e===void 0)&&process.nextTick(ee,this),r};function ee(e){var r=e._readableState;r.readableListening=e.listenerCount("readable")>0,r.resumeScheduled&&!r.paused?r.flowing=!0:e.listenerCount("data")>0&&e.resume()}function B(e){n("readable nexttick read 0"),e.read(0)}D.prototype.resume=function(){var e=this._readableState;return e.flowing||(n("resume"),e.flowing=!e.readableListening,oe(this,e)),e.paused=!1,this};function oe(e,r){r.resumeScheduled||(r.resumeScheduled=!0,process.nextTick(le,e,r))}function le(e,r){n("resume",r.reading),r.reading||e.read(0),r.resumeScheduled=!1,e.emit("resume"),i(e),r.flowing&&!r.reading&&e.read(0)}D.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function i(e){var r=e._readableState;for(n("flow",r.flowing);r.flowing&&e.read()!==null;);}D.prototype.wrap=function(e){var r=this,f=this._readableState,_=!1;e.on("end",function(){if(n("wrapped end"),f.decoder&&!f.ended){var q=f.decoder.end();q&&q.length&&r.push(q)}r.push(null)}),e.on("data",function(q){if(n("wrapped data"),f.decoder&&(q=f.decoder.write(q)),!(f.objectMode&&q==null)&&!(!f.objectMode&&(!q||!q.length))){var F=r.push(q);F||(_=!0,e.pause())}});for(var I in e)this[I]===void 0&&typeof e[I]=="function"&&(this[I]=function(F){return function(){return e[F].apply(e,arguments)}}(I));for(var L=0;L<j.length;L++)e.on(j[L],this.emit.bind(this,j[L]));return this._read=function(q){n("wrapped _read",q),_&&(_=!1,e.resume())},this},typeof Symbol=="function"&&(D.prototype[Symbol.asyncIterator]=function(){return R===void 0&&(R=nr()),R(this)}),Object.defineProperty(D.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(D.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(D.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(r){this._readableState&&(this._readableState.flowing=r)}}),D._fromList=t,Object.defineProperty(D.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function t(e,r){if(r.length===0)return null;var f;return r.objectMode?f=r.buffer.shift():!e||e>=r.length?(r.decoder?f=r.buffer.join(""):r.buffer.length===1?f=r.buffer.first():f=r.buffer.concat(r.length),r.buffer.clear()):f=r.buffer.consume(e,r.decoder),f}function u(e){var r=e._readableState;n("endReadable",r.endEmitted),r.endEmitted||(r.ended=!0,process.nextTick(S,r,e))}function S(e,r){if(n("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&e.length===0&&(e.endEmitted=!0,r.readable=!1,r.emit("end"),e.autoDestroy)){var f=r._writableState;(!f||f.autoDestroy&&f.finished)&&r.destroy()}}typeof Symbol=="function"&&(D.from=function(e,r){return M===void 0&&(M=ar()),M(D,e,r)});function P(e,r){for(var f=0,_=e.length;f<_;f++)if(e[f]===r)return f;return-1}return Ee}var Se,Fe;function er(){if(Fe)return Se;Fe=1,Se=a;var T=Y().codes,v=T.ERR_METHOD_NOT_IMPLEMENTED,E=T.ERR_MULTIPLE_CALLBACK,A=T.ERR_TRANSFORM_ALREADY_TRANSFORMING,O=T.ERR_TRANSFORM_WITH_LENGTH_0,s=V();X()(a,s);function b(p,g){var o=this._transformState;o.transforming=!1;var h=o.writecb;if(h===null)return this.emit("error",new E);o.writechunk=null,o.writecb=null,g!=null&&this.push(g),h(p);var l=this._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}function a(p){if(!(this instanceof a))return new a(p);s.call(this,p),this._transformState={afterTransform:b.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,p&&(typeof p.transform=="function"&&(this._transform=p.transform),typeof p.flush=="function"&&(this._flush=p.flush)),this.on("prefinish",n)}function n(){var p=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(g,o){d(p,g,o)}):d(this,null,null)}a.prototype.push=function(p,g){return this._transformState.needTransform=!1,s.prototype.push.call(this,p,g)},a.prototype._transform=function(p,g,o){o(new v("_transform()"))},a.prototype._write=function(p,g,o){var h=this._transformState;if(h.writecb=o,h.writechunk=p,h.writeencoding=g,!h.transforming){var l=this._readableState;(h.needTransform||l.needReadable||l.length<l.highWaterMark)&&this._read(l.highWaterMark)}},a.prototype._read=function(p){var g=this._transformState;g.writechunk!==null&&!g.transforming?(g.transforming=!0,this._transform(g.writechunk,g.writeencoding,g.afterTransform)):g.needTransform=!0},a.prototype._destroy=function(p,g){s.prototype._destroy.call(this,p,function(o){g(o)})};function d(p,g,o){if(g)return p.emit("error",g);if(o!=null&&p.push(o),p._writableState.length)throw new O;if(p._transformState.transforming)throw new A;return p.push(null)}return Se}var me,He;function fr(){if(He)return me;He=1,me=v;var T=er();X()(v,T);function v(E){if(!(this instanceof v))return new v(E);T.call(this,E)}return v.prototype._transform=function(E,A,O){O(null,E)},me}var Te,Ge;function or(){if(Ge)return Te;Ge=1;var T;function v(o){var h=!1;return function(){h||(h=!0,o.apply(void 0,arguments))}}var E=Y().codes,A=E.ERR_MISSING_ARGS,O=E.ERR_STREAM_DESTROYED;function s(o){if(o)throw o}function b(o){return o.setHeader&&typeof o.abort=="function"}function a(o,h,l,c){c=v(c);var w=!1;o.on("close",function(){w=!0}),T===void 0&&(T=Oe()),T(o,{readable:h,writable:l},function(y){if(y)return c(y);w=!0,c()});var m=!1;return function(y){if(!w&&!m){if(m=!0,b(o))return o.abort();if(typeof o.destroy=="function")return o.destroy();c(y||new O("pipe"))}}}function n(o){o()}function d(o,h){return o.pipe(h)}function p(o){return!o.length||typeof o[o.length-1]!="function"?s:o.pop()}function g(){for(var o=arguments.length,h=new Array(o),l=0;l<o;l++)h[l]=arguments[l];var c=p(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new A("streams");var w,m=h.map(function(y,R){var M=R<h.length-1,C=R>0;return a(y,M,C,function(j){w||(w=j),j&&m.forEach(n),!M&&(m.forEach(n),c(w))})});return h.reduce(d)}return Te=g,Te}var Ve;function pr(){return Ve||(Ve=1,function(T,v){v=T.exports=Ze(),v.Stream=v,v.Readable=v,v.Writable=Qe(),v.Duplex=V(),v.Transform=er(),v.PassThrough=fr(),v.finished=Oe(),v.pipeline=or()}(te,te.exports)),te.exports}export{pr as r};
