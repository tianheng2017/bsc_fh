var w=(B,E,s)=>new Promise((h,d)=>{var v=p=>{try{_(s.next(p))}catch(y){d(y)}},k=p=>{try{_(s.throw(p))}catch(y){d(y)}},_=p=>p.done?h(p.value):Promise.resolve(p.value).then(v,k);_((s=s.apply(B,E)).next())});import{t as S,F as z,X as O,I as P,D as G,M as I}from"./element-plus.2d443847.js";import{M as F,f as K,b as X}from"./index.a71cd9d1.js";import{c as j,m as q}from"./menu.7a14fc02.js";import{u as H}from"./usePaging.0017d00a.js";import{_ as J}from"./edit.vue_vue_type_script_setup_true_lang.1c706e9f.js";import{d as Q,s as R,r as W,o as a,c as g,U as n,L as t,a as $,M as C,K as u,u as f,R as N,S as c,n as A,ad as Y}from"./@vue.230e89ba.js";import"./@vueuse.88988742.js";import"./dayjs.2133d750.js";import"./@ethereumjs.af3f5dff.js";import"./ethereumjs-util.dbf079cb.js";import"./buffer.b4004db0.js";import"./base64-js.ed86f7b6.js";import"./ieee754.fe4a9da6.js";import"./@ethersproject.5d8623a7.js";import"./hash.js.c7ed14af.js";import"./minimalistic-assert.2f00d150.js";import"./inherits.66060a12.js";import"./js-sha3.0fd6df36.js";import"./rlp.4a2a910e.js";import"./rollup-plugin-node-polyfills.dd1027b1.js";import"./process.627009b3.js";import"./string_decoder.87146aa7.js";import"./safe-buffer.d5a81f77.js";import"./ethereum-cryptography.1b681b54.js";import"./secp256k1.bfa26894.js";import"./elliptic.8f0e0a52.js";import"./bn.js.92292d6f.js";import"./minimalistic-crypto-utils.9fe8a21e.js";import"./brorand.f18a1e1e.js";import"./hmac-drbg.79c494c0.js";import"./randombytes.926bd932.js";import"./keccak.c6d83d20.js";import"./readable-stream.5bcfe07c.js";import"./util-deprecate.e6516745.js";import"./create-hash.0f02e375.js";import"./md5.js.24480850.js";import"./hash-base.b9b8d2fc.js";import"./ripemd160.b7ffce25.js";import"./sha.js.28d4c0c4.js";import"./cipher-base.698ebf24.js";import"./crc-32.e5e20fdb.js";import"./@element-plus.da5c63ac.js";import"./lodash-es.29c53eac.js";import"./async-validator.fb49d0f5.js";import"./@ctrl.82a509e0.js";import"./@popperjs.36402333.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./lodash.6195a15c.js";import"./axios.f8ca758d.js";import"./vue-router.c0281831.js";import"./pinia.1d1aade0.js";import"./vue-demi.bfae2336.js";import"./css-color-function.7e799b03.js";import"./color.e43c8b30.js";import"./clone.50df6560.js";import"./color-convert.69e17089.js";import"./color-string.e356f5de.js";import"./color-name.e7a4e1d3.js";import"./ms.a9ae1d6d.js";import"./nprogress.998a2723.js";import"./echarts.5e2dc550.js";import"./zrender.510214c4.js";import"./highlight.js.4ebdf9a4.js";import"./@highlightjs.b3d01323.js";import"./index.89655f46.js";const Z={class:"menu-lists"},tt=c(" \u65B0\u589E "),et=c(" \u5C55\u5F00/\u6298\u53E0 "),ot={key:0},it={key:1},at={key:2},nt={class:"flex"},rt=c("\u6B63\u5E38"),st=c("\u505C\u7528"),pt=c(" \u65B0\u589E "),mt=c(" \u7F16\u8F91 "),lt=c(" \u5220\u9664 "),ge=Q({__name:"index",setup(B){const E=R(),s=R();let h=!1;const d=W(!1),{pager:v,getLists:k}=H({fetchFun:q,params:{page_type:0}}),_=i=>w(this,null,function*(){var e,r;d.value=!0,yield A(),i&&((e=s.value)==null||e.setFormData({pid:i})),(r=s.value)==null||r.open("add")}),p=i=>w(this,null,function*(){var e,r;d.value=!0,yield A(),(e=s.value)==null||e.open("edit"),(r=s.value)==null||r.setFormData(i)}),y=i=>w(this,null,function*(){yield K.confirm("\u786E\u5B9A\u8981\u5220\u9664\uFF1F"),yield j({id:i}),k()}),L=()=>{h=!h,x(v.lists,h)},x=(i,e=!0)=>{var r;for(const m in i)(r=E.value)==null||r.toggleRowExpansion(i[m],e),i[m].children&&x(i[m].children,e)};return k(),(i,e)=>{const r=X,m=S,l=z,D=O,M=P,U=G,b=Y("perms"),V=I;return a(),g("div",Z,[n(U,{class:"!border-none",shadow:"never"},{default:t(()=>[$("div",null,[C((a(),u(m,{type:"primary",onClick:e[0]||(e[0]=o=>_())},{icon:t(()=>[n(r,{name:"el-icon-Plus"})]),default:t(()=>[tt]),_:1})),[[b,["auth.menu/add"]]]),n(m,{onClick:L},{default:t(()=>[et]),_:1})]),C((a(),u(M,{ref_key:"tableRef",ref:E,class:"mt-4",size:"large",data:f(v).lists,"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:t(()=>[n(l,{label:"\u83DC\u5355\u540D\u79F0",prop:"name","min-width":"150","show-overflow-tooltip":""}),n(l,{label:"\u7C7B\u578B",prop:"type","min-width":"80"},{default:t(({row:o})=>[o.type==f(F).CATALOGUE?(a(),g("div",ot,"\u76EE\u5F55")):o.type==f(F).MENU?(a(),g("div",it,"\u83DC\u5355")):o.type==f(F).BUTTON?(a(),g("div",at,"\u6309\u94AE")):N("",!0)]),_:1}),n(l,{label:"\u56FE\u6807",prop:"icon","min-width":"80"},{default:t(({row:o})=>[$("div",nt,[n(r,{name:o.icon,size:20},null,8,["name"])])]),_:1}),n(l,{label:"\u6743\u9650\u6807\u8BC6",prop:"perms","min-width":"150","show-overflow-tooltip":""}),n(l,{label:"\u72B6\u6001",prop:"is_disable","min-width":"100"},{default:t(({row:o})=>[o.is_disable==0?(a(),u(D,{key:0},{default:t(()=>[rt]),_:1})):(a(),u(D,{key:1,type:"danger"},{default:t(()=>[st]),_:1}))]),_:1}),n(l,{label:"\u6392\u5E8F",prop:"sort","min-width":"100"}),n(l,{label:"\u66F4\u65B0\u65F6\u95F4",prop:"update_time","min-width":"180"}),n(l,{label:"\u64CD\u4F5C",width:"160",fixed:"right"},{default:t(({row:o})=>[C((a(),u(m,{type:"primary",link:"",onClick:T=>_(o.id)},{default:t(()=>[pt]),_:2},1032,["onClick"])),[[b,["auth.menu/add"]]]),C((a(),u(m,{type:"primary",link:"",onClick:T=>p(o)},{default:t(()=>[mt]),_:2},1032,["onClick"])),[[b,["auth.menu/edit"]]]),C((a(),u(m,{type:"danger",link:"",onClick:T=>y(o.id)},{default:t(()=>[lt]),_:2},1032,["onClick"])),[[b,["auth.menu/delete"]]])]),_:1})]),_:1},8,["data"])),[[V,f(v).loading]])]),_:1}),d.value?(a(),u(J,{key:0,ref_key:"editRef",ref:s,onSuccess:f(k),onClose:e[1]||(e[1]=o=>d.value=!1)},null,8,["onSuccess"])):N("",!0)])}}});export{ge as default};
