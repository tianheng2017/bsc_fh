import{b as u}from"./buffer.b4004db0.js";import{s as M}from"./multihashes.1b67d8a5.js";import{s as H}from"./base-x.4c919252.js";import{v as A}from"./varint.b509688f.js";import{c as K}from"./class-is.80c2f82e.js";var D={exports:{}};class Q{constructor(e,s,t,c){this.name=e,this.code=s,this.alphabet=c,t&&c&&(this.engine=t(c))}encode(e){return this.engine.encode(e)}decode(e){return this.engine.decode(e)}isImplemented(){return this.engine}}var W=Q;const{Buffer:q}=u;var Y=function(e){return{encode(s){return typeof s=="string"?q.from(s).toString("hex"):s.toString("hex")},decode(s){for(const t of s)if(e.indexOf(t)<0)throw new Error("invalid base16 character");return q.from(s,"hex")}}};function ee(n,e){n=n.replace(new RegExp("=","g"),"");const s=n.length;let t=0,c=0,i=0;const a=new Uint8Array(s*5/8|0);for(let k=0;k<s;k++)c=c<<5|e.indexOf(n[k]),t+=5,t>=8&&(a[i++]=c>>>t-8&255,t-=8);return a.buffer}function T(n,e){const s=n.byteLength,t=new Uint8Array(n),c=e.indexOf("=")===e.length-1;c&&(e=e.substring(0,e.length-1));let i=0,a=0,k="";for(let r=0;r<s;r++)for(a=a<<8|t[r],i+=8;i>=5;)k+=e[a>>>i-5&31],i-=5;if(i>0&&(k+=e[a<<5-i&31]),c)for(;k.length%8!==0;)k+="=";return k}var se=function(e){return{encode(s){return T(typeof s=="string"?Uint8Array.from(s):s,e)},decode(s){for(const t of s)if(e.indexOf(t)<0)throw new Error("invalid base32 character");return ee(s,e)}}};const{Buffer:P}=u;var ne=function(e){const s=e.indexOf("=")>-1,t=e.indexOf("-")>-1&&e.indexOf("_")>-1;return{encode(c){let i="";typeof c=="string"?i=P.from(c).toString("base64"):i=c.toString("base64"),t&&(i=i.replace(/\+/g,"-").replace(/\//g,"_"));const a=i.indexOf("=");return a>0&&!s&&(i=i.substring(0,a)),i},decode(c){for(const i of c)if(e.indexOf(i)<0)throw new Error("invalid base64 character");return P.from(c,"base64")}}};const ie=W,p=H,te=Y,g=se,C=ne,R=[["base1","1","","1"],["base2","0",p,"01"],["base8","7",p,"01234567"],["base10","9",p,"0123456789"],["base16","f",te,"0123456789abcdef"],["base32","b",g,"abcdefghijklmnopqrstuvwxyz234567"],["base32pad","c",g,"abcdefghijklmnopqrstuvwxyz234567="],["base32hex","v",g,"0123456789abcdefghijklmnopqrstuv"],["base32hexpad","t",g,"0123456789abcdefghijklmnopqrstuv="],["base32z","h",g,"ybndrfg8ejkmcpqxot1uwisza345h769"],["base58flickr","Z",p,"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"],["base58btc","z",p,"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"],["base64","m",C,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"],["base64pad","M",C,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],["base64url","u",C,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"],["base64urlpad","U",C,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="]],O=R.reduce((n,e)=>(n[e[0]]=new ie(e[0],e[1],e[2],e[3]),n),{}),oe=R.reduce((n,e)=>(n[e[1]]=O[e[0]],n),{});var re={names:O,codes:oe};(function(n,e){const{Buffer:s}=u,t=re;e=n.exports=i,e.encode=a,e.decode=k,e.isEncoded=r,e.names=Object.freeze(Object.keys(t.names)),e.codes=Object.freeze(Object.keys(t.codes));const c=new Error("Unsupported encoding");function i(o,b){if(!b)throw new Error("requires an encoded buffer");const f=d(o),B=s.from(f.code),G=f.name;return l(G,b),s.concat([B,b])}function a(o,b){const f=d(o),B=f.name;return i(B,s.from(f.encode(b)))}function k(o){s.isBuffer(o)&&(o=o.toString());const b=o.substring(0,1);o=o.substring(1,o.length),typeof o=="string"&&(o=s.from(o));const f=d(b);return s.from(f.decode(o.toString()))}function r(o){if(s.isBuffer(o)&&(o=o.toString()),Object.prototype.toString.call(o)!=="[object String]")return!1;const b=o.substring(0,1);try{return d(b).name}catch(f){return!1}}function l(o,b){d(o).decode(b.toString())}function d(o){let b;if(t.names[o])b=t.names[o];else if(t.codes[o])b=t.codes[o];else throw c;if(!b.isImplemented())throw new Error("Base "+o+" is not implemented yet");return b}})(D,D.exports);var N={exports:{}};const ce=0,ae=4,ke=6,be=17,le=30,de=33,fe=41,ue=42,he=47,me=48,pe=49,ge=50,ve=51,we=53,xe=54,Ce=55,ye=56,Be=80,Ee=81,Ie=85,je=96,De=99,Ne=132,$e=212,ze=213,qe=214,Te=230,Pe=273,Ue=301,Se=302,Ve=400,_e=421,Me=421,Ae=443,Re=444,Oe=445,Je=446,Le=447,Xe=448,Ze=460,Fe=477,Ge=478,He=480,Ke=512,Qe=513,We=4352,x={identity:ce,ip4:ae,tcp:ke,sha1:be,"sha2-256":18,"sha2-512":19,"sha3-512":20,"sha3-384":21,"sha3-256":22,"sha3-224":23,"shake-128":24,"shake-256":25,"keccak-224":26,"keccak-256":27,"keccak-384":28,"keccak-512":29,blake3:le,dccp:de,"murmur3-128":34,"murmur3-32":35,ip6:fe,ip6zone:ue,path:he,multicodec:me,multihash:pe,multiaddr:ge,multibase:ve,dns:we,dns4:xe,dns6:Ce,dnsaddr:ye,protobuf:Be,cbor:Ee,raw:Ie,"dbl-sha2-256":86,rlp:je,bencode:De,"dag-pb":112,"dag-cbor":113,"libp2p-key":114,"git-raw":120,"torrent-info":123,"torrent-file":124,"leofcoin-block":129,"leofcoin-tx":130,"leofcoin-pr":131,sctp:Ne,"dag-jose":133,"dag-cose":134,"eth-block":144,"eth-block-list":145,"eth-tx-trie":146,"eth-tx":147,"eth-tx-receipt-trie":148,"eth-tx-receipt":149,"eth-state-trie":150,"eth-account-snapshot":151,"eth-storage-trie":152,"bitcoin-block":176,"bitcoin-tx":177,"bitcoin-witness-commitment":178,"zcash-block":192,"zcash-tx":193,"stellar-block":208,"stellar-tx":209,md4:$e,md5:ze,bmt:qe,"decred-block":224,"decred-tx":225,"ipld-ns":226,"ipfs-ns":227,"swarm-ns":228,"ipns-ns":229,zeronet:Te,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"x25519-pub":236,"ed25519-pub":237,"dash-block":240,"dash-tx":241,"swarm-manifest":250,"swarm-feed":251,udp:Pe,"p2p-webrtc-star":275,"p2p-webrtc-direct":276,"p2p-stardust":277,"p2p-circuit":290,"dag-json":297,udt:Ue,utp:Se,unix:Ve,p2p:_e,ipfs:Me,https:Ae,onion:Re,onion3:Oe,garlic64:Je,garlic32:Le,tls:Xe,quic:Ze,ws:Fe,wss:Ge,"p2p-websocket-star":479,http:He,json:Ke,messagepack:Qe,"libp2p-peer-record":769,"sha2-256-trunc254-padded":4114,"ripemd-128":4178,"ripemd-160":4179,"ripemd-256":4180,"ripemd-320":4181,x11:We,"sm3-256":21325,"blake2b-8":45569,"blake2b-16":45570,"blake2b-24":45571,"blake2b-32":45572,"blake2b-40":45573,"blake2b-48":45574,"blake2b-56":45575,"blake2b-64":45576,"blake2b-72":45577,"blake2b-80":45578,"blake2b-88":45579,"blake2b-96":45580,"blake2b-104":45581,"blake2b-112":45582,"blake2b-120":45583,"blake2b-128":45584,"blake2b-136":45585,"blake2b-144":45586,"blake2b-152":45587,"blake2b-160":45588,"blake2b-168":45589,"blake2b-176":45590,"blake2b-184":45591,"blake2b-192":45592,"blake2b-200":45593,"blake2b-208":45594,"blake2b-216":45595,"blake2b-224":45596,"blake2b-232":45597,"blake2b-240":45598,"blake2b-248":45599,"blake2b-256":45600,"blake2b-264":45601,"blake2b-272":45602,"blake2b-280":45603,"blake2b-288":45604,"blake2b-296":45605,"blake2b-304":45606,"blake2b-312":45607,"blake2b-320":45608,"blake2b-328":45609,"blake2b-336":45610,"blake2b-344":45611,"blake2b-352":45612,"blake2b-360":45613,"blake2b-368":45614,"blake2b-376":45615,"blake2b-384":45616,"blake2b-392":45617,"blake2b-400":45618,"blake2b-408":45619,"blake2b-416":45620,"blake2b-424":45621,"blake2b-432":45622,"blake2b-440":45623,"blake2b-448":45624,"blake2b-456":45625,"blake2b-464":45626,"blake2b-472":45627,"blake2b-480":45628,"blake2b-488":45629,"blake2b-496":45630,"blake2b-504":45631,"blake2b-512":45632,"blake2s-8":45633,"blake2s-16":45634,"blake2s-24":45635,"blake2s-32":45636,"blake2s-40":45637,"blake2s-48":45638,"blake2s-56":45639,"blake2s-64":45640,"blake2s-72":45641,"blake2s-80":45642,"blake2s-88":45643,"blake2s-96":45644,"blake2s-104":45645,"blake2s-112":45646,"blake2s-120":45647,"blake2s-128":45648,"blake2s-136":45649,"blake2s-144":45650,"blake2s-152":45651,"blake2s-160":45652,"blake2s-168":45653,"blake2s-176":45654,"blake2s-184":45655,"blake2s-192":45656,"blake2s-200":45657,"blake2s-208":45658,"blake2s-216":45659,"blake2s-224":45660,"blake2s-232":45661,"blake2s-240":45662,"blake2s-248":45663,"blake2s-256":45664,"skein256-8":45825,"skein256-16":45826,"skein256-24":45827,"skein256-32":45828,"skein256-40":45829,"skein256-48":45830,"skein256-56":45831,"skein256-64":45832,"skein256-72":45833,"skein256-80":45834,"skein256-88":45835,"skein256-96":45836,"skein256-104":45837,"skein256-112":45838,"skein256-120":45839,"skein256-128":45840,"skein256-136":45841,"skein256-144":45842,"skein256-152":45843,"skein256-160":45844,"skein256-168":45845,"skein256-176":45846,"skein256-184":45847,"skein256-192":45848,"skein256-200":45849,"skein256-208":45850,"skein256-216":45851,"skein256-224":45852,"skein256-232":45853,"skein256-240":45854,"skein256-248":45855,"skein256-256":45856,"skein512-8":45857,"skein512-16":45858,"skein512-24":45859,"skein512-32":45860,"skein512-40":45861,"skein512-48":45862,"skein512-56":45863,"skein512-64":45864,"skein512-72":45865,"skein512-80":45866,"skein512-88":45867,"skein512-96":45868,"skein512-104":45869,"skein512-112":45870,"skein512-120":45871,"skein512-128":45872,"skein512-136":45873,"skein512-144":45874,"skein512-152":45875,"skein512-160":45876,"skein512-168":45877,"skein512-176":45878,"skein512-184":45879,"skein512-192":45880,"skein512-200":45881,"skein512-208":45882,"skein512-216":45883,"skein512-224":45884,"skein512-232":45885,"skein512-240":45886,"skein512-248":45887,"skein512-256":45888,"skein512-264":45889,"skein512-272":45890,"skein512-280":45891,"skein512-288":45892,"skein512-296":45893,"skein512-304":45894,"skein512-312":45895,"skein512-320":45896,"skein512-328":45897,"skein512-336":45898,"skein512-344":45899,"skein512-352":45900,"skein512-360":45901,"skein512-368":45902,"skein512-376":45903,"skein512-384":45904,"skein512-392":45905,"skein512-400":45906,"skein512-408":45907,"skein512-416":45908,"skein512-424":45909,"skein512-432":45910,"skein512-440":45911,"skein512-448":45912,"skein512-456":45913,"skein512-464":45914,"skein512-472":45915,"skein512-480":45916,"skein512-488":45917,"skein512-496":45918,"skein512-504":45919,"skein512-512":45920,"skein1024-8":45921,"skein1024-16":45922,"skein1024-24":45923,"skein1024-32":45924,"skein1024-40":45925,"skein1024-48":45926,"skein1024-56":45927,"skein1024-64":45928,"skein1024-72":45929,"skein1024-80":45930,"skein1024-88":45931,"skein1024-96":45932,"skein1024-104":45933,"skein1024-112":45934,"skein1024-120":45935,"skein1024-128":45936,"skein1024-136":45937,"skein1024-144":45938,"skein1024-152":45939,"skein1024-160":45940,"skein1024-168":45941,"skein1024-176":45942,"skein1024-184":45943,"skein1024-192":45944,"skein1024-200":45945,"skein1024-208":45946,"skein1024-216":45947,"skein1024-224":45948,"skein1024-232":45949,"skein1024-240":45950,"skein1024-248":45951,"skein1024-256":45952,"skein1024-264":45953,"skein1024-272":45954,"skein1024-280":45955,"skein1024-288":45956,"skein1024-296":45957,"skein1024-304":45958,"skein1024-312":45959,"skein1024-320":45960,"skein1024-328":45961,"skein1024-336":45962,"skein1024-344":45963,"skein1024-352":45964,"skein1024-360":45965,"skein1024-368":45966,"skein1024-376":45967,"skein1024-384":45968,"skein1024-392":45969,"skein1024-400":45970,"skein1024-408":45971,"skein1024-416":45972,"skein1024-424":45973,"skein1024-432":45974,"skein1024-440":45975,"skein1024-448":45976,"skein1024-456":45977,"skein1024-464":45978,"skein1024-472":45979,"skein1024-480":45980,"skein1024-488":45981,"skein1024-496":45982,"skein1024-504":45983,"skein1024-512":45984,"skein1024-520":45985,"skein1024-528":45986,"skein1024-536":45987,"skein1024-544":45988,"skein1024-552":45989,"skein1024-560":45990,"skein1024-568":45991,"skein1024-576":45992,"skein1024-584":45993,"skein1024-592":45994,"skein1024-600":45995,"skein1024-608":45996,"skein1024-616":45997,"skein1024-624":45998,"skein1024-632":45999,"skein1024-640":46e3,"skein1024-648":46001,"skein1024-656":46002,"skein1024-664":46003,"skein1024-672":46004,"skein1024-680":46005,"skein1024-688":46006,"skein1024-696":46007,"skein1024-704":46008,"skein1024-712":46009,"skein1024-720":46010,"skein1024-728":46011,"skein1024-736":46012,"skein1024-744":46013,"skein1024-752":46014,"skein1024-760":46015,"skein1024-768":46016,"skein1024-776":46017,"skein1024-784":46018,"skein1024-792":46019,"skein1024-800":46020,"skein1024-808":46021,"skein1024-816":46022,"skein1024-824":46023,"skein1024-832":46024,"skein1024-840":46025,"skein1024-848":46026,"skein1024-856":46027,"skein1024-864":46028,"skein1024-872":46029,"skein1024-880":46030,"skein1024-888":46031,"skein1024-896":46032,"skein1024-904":46033,"skein1024-912":46034,"skein1024-920":46035,"skein1024-928":46036,"skein1024-936":46037,"skein1024-944":46038,"skein1024-952":46039,"skein1024-960":46040,"skein1024-968":46041,"skein1024-976":46042,"skein1024-984":46043,"skein1024-992":46044,"skein1024-1000":46045,"skein1024-1008":46046,"skein1024-1016":46047,"skein1024-1024":46048,"poseidon-bls12_381-a2-fc1":46081,"poseidon-bls12_381-a2-fc1-sc":46082,"zeroxcert-imprint-256":52753,"fil-commitment-unsealed":61697,"fil-commitment-sealed":61698,"holochain-adr-v0":8417572,"holochain-adr-v1":8483108,"holochain-key-v0":9728292,"holochain-key-v1":9793828,"holochain-sig-v0":10645796,"holochain-sig-v1":10711332},U=x,J=new Map;for(const n in U){const e=U[n];J.set(e,n)}var Ye=Object.freeze(J);const $=A,{Buffer:z}=u;var L={numberToBuffer:Z,bufferToNumber:X,varintBufferEncode:es,varintBufferDecode:ss,varintEncode:ns};function X(n){return parseInt(n.toString("hex"),16)}function Z(n){let e=n.toString(16);return e.length%2===1&&(e="0"+e),z.from(e,"hex")}function es(n){return z.from($.encode(X(n)))}function ss(n){return Z($.decode(n))}function ns(n){return z.from($.encode(n))}const S=x,is=L.varintEncode,F={};for(const n in S){const e=S[n];F[n]=is(e)}var ts=Object.freeze(F),E,V;function os(){if(V)return E;V=1;const n=x,e={};for(const[s,t]of Object.entries(n))e[s.toUpperCase().replace(/-/g,"_")]=t;return E=Object.freeze(e),E}var I,_;function rs(){if(_)return I;_=1;const n=x,e={};for(const[s,t]of Object.entries(n))e[t]===void 0&&(e[t]=s);return I=Object.freeze(e),I}(function(n,e){const{Buffer:s}=u,t=A,c=Ye,i=ts,a=L;e=n.exports,e.addPrefix=(r,l)=>{let d;if(s.isBuffer(r))d=a.varintBufferEncode(r);else if(i[r])d=i[r];else throw new Error("multicodec not recognized");return s.concat([d,l])},e.rmPrefix=r=>(t.decode(r),r.slice(t.decode.bytes)),e.getCodec=r=>{const l=t.decode(r),d=c.get(l);if(d===void 0)throw new Error(`Code ${l} not found`);return d},e.getName=r=>c.get(r),e.getNumber=r=>{const l=i[r];if(l===void 0)throw new Error("Codec `"+r+"` not found");return a.varintBufferDecode(l)[0]},e.getCode=r=>t.decode(r),e.getCodeVarint=r=>{const l=i[r];if(l===void 0)throw new Error("Codec `"+r+"` not found");return l},e.getVarint=r=>t.encode(r);const k=os();Object.assign(e,k),e.print=rs()})(N,N.exports);const cs=M,{Buffer:as}=u;var ks={checkCIDComponents:function(n){if(n==null)return"null values are not valid CIDs";if(!(n.version===0||n.version===1))return"Invalid version, must be a number equal to 1 or 0";if(typeof n.codec!="string")return"codec must be string";if(n.version===0){if(n.codec!=="dag-pb")return"codec must be 'dag-pb' for CIDv0";if(n.multibaseName!=="base58btc")return"multibaseName must be 'base58btc' for CIDv0"}if(!as.isBuffer(n.multihash))return"multihash must be a Buffer";try{cs.validate(n.multihash)}catch(e){let s=e.message;return s||(s="Multihash validation failed"),s}}},bs=ks;const{Buffer:h}=u,y=M,j=D.exports,m=N.exports,ls=x,ds=bs,fs=K.exports;class v{constructor(e,s,t,c){if(w.isCID(e)){const i=e;this.version=i.version,this.codec=i.codec,this.multihash=h.from(i.multihash),this.multibaseName=i.multibaseName||(i.version===0?"base58btc":"base32");return}if(typeof e=="string"){const i=j.isEncoded(e);if(i){const a=j.decode(e);this.version=parseInt(a.slice(0,1).toString("hex"),16),this.codec=m.getCodec(a.slice(1)),this.multihash=m.rmPrefix(a.slice(1)),this.multibaseName=i}else this.version=0,this.codec="dag-pb",this.multihash=y.fromB58String(e),this.multibaseName="base58btc";v.validateCID(this),Object.defineProperty(this,"string",{value:e});return}if(h.isBuffer(e)){const i=e.slice(0,1),a=parseInt(i.toString("hex"),16);if(a===1){const k=e;this.version=a,this.codec=m.getCodec(k.slice(1)),this.multihash=m.rmPrefix(k.slice(1)),this.multibaseName="base32"}else this.version=0,this.codec="dag-pb",this.multihash=e,this.multibaseName="base58btc";v.validateCID(this);return}this.version=e,this.codec=s,this.multihash=t,this.multibaseName=c||(e===0?"base58btc":"base32"),v.validateCID(this)}get buffer(){let e=this._buffer;if(!e){if(this.version===0)e=this.multihash;else if(this.version===1)e=h.concat([h.from("01","hex"),m.getCodeVarint(this.codec),this.multihash]);else throw new Error("unsupported version");Object.defineProperty(this,"_buffer",{value:e})}return e}get prefix(){return h.concat([h.from(`0${this.version}`,"hex"),m.getCodeVarint(this.codec),y.prefix(this.multihash)])}toV0(){if(this.codec!=="dag-pb")throw new Error("Cannot convert a non dag-pb CID to CIDv0");const{name:e,length:s}=y.decode(this.multihash);if(e!=="sha2-256")throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");if(s!==32)throw new Error("Cannot convert non 32 byte multihash CID to CIDv0");return new w(0,this.codec,this.multihash)}toV1(){return new w(1,this.codec,this.multihash)}toBaseEncodedString(e=this.multibaseName){if(this.string&&e===this.multibaseName)return this.string;let s=null;if(this.version===0){if(e!=="base58btc")throw new Error("not supported with CIDv0, to support different bases, please migrate the instance do CIDv1, you can do that through cid.toV1()");s=y.toB58String(this.multihash)}else if(this.version===1)s=j.encode(e,this.buffer).toString();else throw new Error("unsupported version");return e===this.multibaseName&&Object.defineProperty(this,"string",{value:s}),s}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}toString(e){return this.toBaseEncodedString(e)}toJSON(){return{codec:this.codec,version:this.version,hash:this.multihash}}equals(e){return this.codec===e.codec&&this.version===e.version&&this.multihash.equals(e.multihash)}static validateCID(e){const s=ds.checkCIDComponents(e);if(s)throw new Error(s)}}const w=fs(v,{className:"CID",symbolName:"@ipld/js-cid/CID"});w.codecs=ls;var vs=w;export{vs as s};
