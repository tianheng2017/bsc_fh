import{x as w}from"./xhr.e6c9f5f3.js";import{u as A}from"./url-set-query.0893195f.js";import{o as h}from"./object-assign.9840bf7d.js";import{s as T}from"./strict-uri-encode.abb8d35a.js";import{d as $}from"./decode-uri-component.4cf187fa.js";var s={},E=T,y=h,d=$;function b(e){switch(e.arrayFormat){case"index":return function(r,n,i){return n===null?[u(r,e),"[",i,"]"].join(""):[u(r,e),"[",u(i,e),"]=",u(n,e)].join("")};case"bracket":return function(r,n){return n===null?u(r,e):[u(r,e),"[]=",u(n,e)].join("")};default:return function(r,n){return n===null?u(r,e):[u(r,e),"=",u(n,e)].join("")}}}function C(e){var r;switch(e.arrayFormat){case"index":return function(n,i,t){if(r=/\[(\d*)\]$/.exec(n),n=n.replace(/\[\d*\]$/,""),!r){t[n]=i;return}t[n]===void 0&&(t[n]={}),t[n][r[1]]=i};case"bracket":return function(n,i,t){if(r=/(\[\])$/.exec(n),n=n.replace(/\[\]$/,""),r){if(t[n]===void 0){t[n]=[i];return}}else{t[n]=i;return}t[n]=[].concat(t[n],i)};default:return function(n,i,t){if(t[n]===void 0){t[n]=i;return}t[n]=[].concat(t[n],i)}}}function u(e,r){return r.encode?r.strict?E(e):encodeURIComponent(e):e}function j(e){return Array.isArray(e)?e.sort():typeof e=="object"?j(Object.keys(e)).sort(function(r,n){return Number(r)-Number(n)}).map(function(r){return e[r]}):e}function x(e){var r=e.indexOf("?");return r===-1?"":e.slice(r+1)}function q(e,r){r=y({arrayFormat:"none"},r);var n=C(r),i=Object.create(null);return typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e)?i:(e.split("&").forEach(function(t){var o=t.replace(/\+/g," ").split("="),a=o.shift(),f=o.length>0?o.join("="):void 0;f=f===void 0?null:d(f),n(d(a),f,i)}),Object.keys(i).sort().reduce(function(t,o){var a=i[o];return Boolean(a)&&typeof a=="object"&&!Array.isArray(a)?t[o]=j(a):t[o]=a,t},Object.create(null)))}s.extract=x;s.parse=q;s.stringify=function(e,r){var n={encode:!0,strict:!0,arrayFormat:"none"};r=y(n,r),r.sort===!1&&(r.sort=function(){});var i=b(r);return e?Object.keys(e).sort(r.sort).map(function(t){var o=e[t];if(o===void 0)return"";if(o===null)return u(t,r);if(Array.isArray(o)){var a=[];return o.slice().forEach(function(f){f!==void 0&&a.push(i(t,f,a.length))}),a.join("&")}return u(t,r)+"="+u(o,r)}).filter(function(t){return t.length>0}).join("&"):""};s.parseUrl=function(e,r){return{url:e.split("?")[0]||"",query:q(x(e),r)}};var F=O;function O(e,r,n){var i=r.toLowerCase();!e[r]&&!e[i]&&(e[r]=n)}var S=U;function U(e,r){return r?{statusCode:r.statusCode,headers:r.headers,method:e.method,url:e.url,rawRequest:r.rawRequest?r.rawRequest:r}:null}var H=w.exports,J=S,l=function(){},N=_;function _(e,r){delete e.uri;var n=!1;e.responseType==="json"&&(e.responseType="text",n=!0);var i=H(e,function(a,f,c){if(n&&!a)try{var g=f.rawRequest.responseText;c=JSON.parse(g)}catch(R){a=R}f=J(e,f),a?r(a,null,f):r(a,c,f),r=l}),t=i.onabort;return i.onabort=function(){var o=t.apply(i,Array.prototype.slice.call(arguments));return r(new Error("XHR Aborted")),r=l,o},i}var p=s,z=A,B=h,v=F,G=N,m="application/json",L=function(){},P=Q;function Q(e,r,n){if(!e||typeof e!="string")throw new TypeError("must specify a URL");if(typeof r=="function"&&(n=r,r={}),n&&typeof n!="function")throw new TypeError("expected cb to be undefined or a function");n=n||L,r=r||{};var i=r.json?"json":"text";r=B({responseType:i},r);var t=r.headers||{},o=(r.method||"GET").toUpperCase(),a=r.query;return a&&(typeof a!="string"&&(a=p.stringify(a)),e=z(e,a)),r.responseType==="json"&&v(t,"Accept",m),r.json&&o!=="GET"&&o!=="HEAD"&&(v(t,"Content-Type",m),r.body=JSON.stringify(r.body)),r.method=o,r.url=e,r.headers=t,delete r.query,delete r.json,G(r,n)}export{P as x};
