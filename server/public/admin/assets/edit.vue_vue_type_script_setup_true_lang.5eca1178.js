var _=(F,E,s)=>new Promise((i,d)=>{var c=e=>{try{p(s.next(e))}catch(m){d(m)}},r=e=>{try{p(s.throw(e))}catch(m){d(m)}},p=e=>e.done?i(e.value):Promise.resolve(e.value).then(c,r);p((s=s.apply(F,E)).next())});import{L as U,y as h,x as L,W as N,s as I,A as S}from"./element-plus.2d443847.js";import{d as q,a as P,b as T}from"./department.1b08223f.js";import{P as K}from"./index.89655f46.js";import{d as M,s as V,r as v,e as O,$ as W,o as B,c as $,U as l,L as t,K as j,R as z,a as D,u as G}from"./@vue.230e89ba.js";const H={class:"edit-popup"},J=D("div",{class:"form-tips"},"\u9ED8\u8BA4\u4E3A0\uFF0C \u6570\u503C\u8D8A\u5927\u8D8A\u6392\u524D",-1),ue=M({__name:"edit",emits:["success","close"],setup(F,{expose:E,emit:s}){const i=V(),d=V(),c=v([]),r=v("add"),p=O(()=>r.value=="edit"?"\u7F16\u8F91\u90E8\u95E8":"\u65B0\u589E\u90E8\u95E8"),e=W({id:"",pid:"",name:"",leader:"",mobile:"",sort:0,status:1}),m={pid:[{required:!0,message:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8",trigger:["change"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0",trigger:["blur"]}]},b=()=>_(this,null,function*(){const o=yield q();c.value=o}),A=()=>_(this,null,function*(){var o,u;yield(o=i.value)==null?void 0:o.validate(),r.value=="edit"?yield P(e):yield T(e),(u=d.value)==null||u.close(),s("success")}),C=(o="add")=>{var u;r.value=o,(u=d.value)==null||u.open()},k=o=>{for(const u in e)o[u]!=null&&o[u]!=null&&(e[u]=o[u])},w=()=>{s("close")};return b(),E({open:C,setFormData:k}),(o,u)=>{const y=U,n=h,f=L,g=N,x=I,R=S;return B(),$("div",H,[l(K,{ref_key:"popupRef",ref:d,title:G(p),async:!0,width:"550px",clickModalClose:!0,onConfirm:A,onClose:w},{default:t(()=>[l(R,{ref_key:"formRef",ref:i,model:e,"label-width":"84px",rules:m},{default:t(()=>[e.pid!==0?(B(),j(n,{key:0,label:"\u4E0A\u7EA7\u90E8\u95E8",prop:"pid"},{default:t(()=>[l(y,{class:"flex-1",modelValue:e.pid,"onUpdate:modelValue":u[0]||(u[0]=a=>e.pid=a),data:c.value,clearable:"","node-key":"id",props:{value:"id",label:"name"},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data"])]),_:1})):z("",!0),l(n,{label:"\u90E8\u95E8\u540D\u79F0",prop:"name"},{default:t(()=>[l(f,{modelValue:e.name,"onUpdate:modelValue":u[1]||(u[1]=a=>e.name=a),placeholder:"\u8BF7\u8F93\u5165\u90E8\u95E8\u540D\u79F0"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u8D1F\u8D23\u4EBA",prop:"leader"},{default:t(()=>[l(f,{modelValue:e.leader,"onUpdate:modelValue":u[2]||(u[2]=a=>e.leader=a),placeholder:"\u8BF7\u8F93\u5165\u8D1F\u8D23\u4EBA\u59D3\u540D"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"mobile"},{default:t(()=>[l(f,{modelValue:e.mobile,"onUpdate:modelValue":u[3]||(u[3]=a=>e.mobile=a),placeholder:"\u8BF7\u8F93\u5165\u8054\u7CFB\u7535\u8BDD"},null,8,["modelValue"])]),_:1}),l(n,{label:"\u6392\u5E8F",prop:"sort"},{default:t(()=>[D("div",null,[l(g,{modelValue:e.sort,"onUpdate:modelValue":u[4]||(u[4]=a=>e.sort=a)},null,8,["modelValue"]),J])]),_:1}),l(n,{label:"\u90E8\u95E8\u72B6\u6001"},{default:t(()=>[l(x,{modelValue:e.status,"onUpdate:modelValue":u[5]||(u[5]=a=>e.status=a),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{ue as _};
