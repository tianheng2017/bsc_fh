import{x as P,y as I,L as O,G as T,H as G,s as H,A as K}from"./element-plus.6014d9af.js";import{M as $}from"./picker.395e761e.js";import{P as z}from"./index.50733217.js";import{r as J}from"./role.9ff7b083.js";import{r as m}from"./index.78f53bc3.js";import{d as Q}from"./department.80b4fdee.js";import{c as W}from"./post.6b7ba2e2.js";import{d as X,s as A,r as Y,e as Z,$ as B,o as d,c as V,U as o,L as t,a as v,V as k,a8 as y,K as p,R as D,u as ee}from"./@vue.67e62321.js";function ce(r){return m.get({url:"/auth.admin/lists",params:r})}function ue(r){return m.post({url:"/auth.admin/add",params:r})}function le(r){return m.post({url:"/auth.admin/edit",params:r})}function _e(r){return m.post({url:"/auth.admin/delete",params:r})}const oe={class:"edit-popup"},ae=v("div",{class:"form-tips"},"\u5EFA\u8BAE\u5C3A\u5BF8\uFF1A100*100px\uFF0C\u652F\u6301jpg\uFF0Cjpeg\uFF0Cpng\u683C\u5F0F",-1),fe=X({__name:"edit",emits:["success","close"],setup(r,{expose:x,emit:E}){const g=A(),c=A(),_=Y("add"),U=Z(()=>_.value=="edit"?"\u7F16\u8F91\u7BA1\u7406\u5458":"\u65B0\u589E\u7BA1\u7406\u5458"),u=B({id:"",account:"",name:"",dept_id:"",jobs_id:"",role_id:"",avatar:"",password:"",password_confirm:"",disable:0,multipoint_login:1,root:0}),f=B({account:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7",trigger:["blur"]}],name:[{required:!0,message:"\u8BF7\u8F93\u5165\u540D\u79F0",trigger:["blur"]}],role_id:[{required:!0,message:"\u8BF7\u9009\u62E9\u89D2\u8272",trigger:["blur"]}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:["blur"]}],password_confirm:[{required:!0,message:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801",trigger:["blur"]}]}),n=B({role:[],dept:[],jobs:[]}),j=()=>{J({page_type:0}).then(a=>{n.role=a.lists}),Q({page_type:0}).then(a=>{n.dept=a}),W({page_type:0}).then(a=>{n.jobs=a.lists})},h=async()=>{var a,e;await((a=g.value)==null?void 0:a.validate()),_.value=="edit"?await le(u):await ue(u),(e=c.value)==null||e.close(),E("success")},L=(a="add")=>{var e;_.value=a,(e=c.value)==null||e.open()},R=a=>{for(const e in u)a[e]!=null&&a[e]!=null&&(u[e]=a[e]);f.password=[],f.password_confirm=[]},q=()=>{E("close")};return j(),x({open:L,setFormData:R}),(a,e)=>{const i=P,s=I,S=$,M=O,F=T,w=G,C=H,N=K;return d(),V("div",oe,[o(z,{ref_key:"popupRef",ref:c,title:ee(U),async:!0,width:"550px",clickModalClose:!0,onConfirm:h,onClose:q},{default:t(()=>[o(N,{ref_key:"formRef",ref:g,model:u,"label-width":"84px",rules:f},{default:t(()=>[o(s,{label:"\u8D26\u53F7",prop:"account"},{default:t(()=>[o(i,{modelValue:u.account,"onUpdate:modelValue":e[0]||(e[0]=l=>u.account=l),disabled:u.root==1,placeholder:"\u8BF7\u8F93\u5165\u8D26\u53F7"},null,8,["modelValue","disabled"])]),_:1}),o(s,{label:"\u5934\u50CF"},{default:t(()=>[v("div",null,[v("div",null,[o(S,{modelValue:u.avatar,"onUpdate:modelValue":e[1]||(e[1]=l=>u.avatar=l),limit:1},null,8,["modelValue"])]),ae])]),_:1}),o(s,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[o(i,{modelValue:u.name,"onUpdate:modelValue":e[2]||(e[2]=l=>u.name=l),placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"dept_id"},{default:t(()=>[o(M,{class:"flex-1",modelValue:u.dept_id,"onUpdate:modelValue":e[3]||(e[3]=l=>u.dept_id=l),data:n.dept,clearable:"","node-key":"id",props:{value:"id",label:"name",disabled(l){return l.status!==1}},"check-strictly":"","default-expand-all":!0,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u7EA7\u90E8\u95E8"},null,8,["modelValue","data","props"])]),_:1}),o(s,{label:"\u5F52\u5C5E\u90E8\u95E8",prop:"dept_id"},{default:t(()=>[o(w,{class:"flex-1",modelValue:u.jobs_id,"onUpdate:modelValue":e[4]||(e[4]=l=>u.jobs_id=l),placeholder:"\u8BF7\u9009\u62E9\u5C97\u4F4D"},{default:t(()=>[(d(!0),V(k,null,y(n.jobs,(l,b)=>(d(),p(F,{key:b,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"\u89D2\u8272",prop:"role_id"},{default:t(()=>[o(w,{modelValue:u.role_id,"onUpdate:modelValue":e[5]||(e[5]=l=>u.role_id=l),disabled:u.root==1,class:"flex-1",placeholder:"\u8BF7\u9009\u62E9\u89D2\u8272"},{default:t(()=>[u.root==1?(d(),p(F,{key:0,label:"\u7CFB\u7EDF\u7BA1\u7406\u5458",value:0})):D("",!0),(d(!0),V(k,null,y(n.role,(l,b)=>(d(),p(F,{key:b,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),o(s,{label:"\u5BC6\u7801",prop:"password"},{default:t(()=>[o(i,{modelValue:u.password,"onUpdate:modelValue":e[6]||(e[6]=l=>u.password=l),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password_confirm"},{default:t(()=>[o(i,{modelValue:u.password_confirm,"onUpdate:modelValue":e[7]||(e[7]=l=>u.password_confirm=l),"show-password":"",placeholder:"\u8BF7\u8F93\u5165\u786E\u8BA4\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),u.root!=1?(d(),p(s,{key:0,label:"\u7BA1\u7406\u5458\u72B6\u6001"},{default:t(()=>[o(C,{modelValue:u.disable,"onUpdate:modelValue":e[8]||(e[8]=l=>u.disable=l),"active-value":0,"inactive-value":1},null,8,["modelValue"])]),_:1})):D("",!0),o(s,{label:"\u591A\u5904\u767B\u5F55"},{default:t(()=>[o(C,{modelValue:u.multipoint_login,"onUpdate:modelValue":e[9]||(e[9]=l=>u.multipoint_login=l),"active-value":1,"inactive-value":0},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{fe as _,le as a,_e as b,ce as c};
